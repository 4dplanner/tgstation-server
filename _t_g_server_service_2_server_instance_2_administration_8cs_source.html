<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tgstation-server: TGServerService/ServerInstance/Administration.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tgstation-server
   &#160;<span id="projectnumber">3.1.6.5</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f220d0611c2e3262469750905b70ffc9.html">TGServerService</a></li><li class="navelem"><a class="el" href="dir_7e4cc728347459cda364f4bf32c2446b.html">ServerInstance</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Administration.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_t_g_server_service_2_server_instance_2_administration_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="_t_g_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.DirectoryServices.AccountManagement;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.IO;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Security.Principal;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.ServiceModel;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Threading;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_service_interface.html">TGServiceInterface</a>;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_service_interface.html">TGServiceInterface</a>.<a class="code" href="namespace_t_g_service_interface_1_1_components.html">Components</a>;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_t_g_server_service.html">TGServerService</a></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;{</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <span class="comment">//note this only works with MACHINE LOCAL groups and admins for now</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    <span class="comment">//if someone wants AD shit, code it yourself</span></div><div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html">   14</a></span>&#160;    sealed <span class="keyword">partial class </span><a class="code" href="class_t_g_server_service_1_1_server_instance.html">ServerInstance</a> : <a class="code" href="class_service_authorization_manager.html">ServiceAuthorizationManager</a>, <a class="code" href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_administration.html">ITGAdministration</a></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    {</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a099e2fa5d7fe81467538a56467c9906c">   19</a></span>&#160;        SecurityIdentifier <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a099e2fa5d7fe81467538a56467c9906c">TheDroidsWereLookingFor</a>;</div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a3d9e7ee0d819cee495bd78f9a54c46fd">   23</a></span>&#160;        <span class="keywordtype">object</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a3d9e7ee0d819cee495bd78f9a54c46fd">authLock</a> = <span class="keyword">new</span> object();</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a1859affa82dede4f2ed907a7d6958529">   27</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a1859affa82dede4f2ed907a7d6958529">LastSeenUser</a>;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a27f51f5fdaedcb7b20c19cb507ae0940">   32</a></span>&#160;        readonly SecurityIdentifier <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a27f51f5fdaedcb7b20c19cb507ae0940">ServiceSID</a> = WindowsIdentity.GetCurrent().User;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#ac2213c2ab6ad583b472de4176b3d8588">   35</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ac2213c2ab6ad583b472de4176b3d8588">GetCurrentAuthorizedGroup</a>()</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            {</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                <span class="keywordflow">if</span> (TheDroidsWereLookingFor == null)</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;ADMIN&quot;</span>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                </div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                <span class="keywordtype">string</span> res = null;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                    res = GroupPrincipal.FindByIdentity(<span class="keyword">new</span> PrincipalContext(ContextType.Machine), IdentityType.Sid, TheDroidsWereLookingFor.Value).Name;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                }</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                <span class="keywordflow">catch</span> { }</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                <span class="keywordflow">return</span> res ?? GroupPrincipal.FindByIdentity(<span class="keyword">new</span> PrincipalContext(ContextType.Domain), IdentityType.Sid, TheDroidsWereLookingFor.Value).Name;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            }</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            <span class="keywordflow">catch</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            {</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            }</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        }</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a17fd1cd46cd9791a923b449460459dbe">   57</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a17fd1cd46cd9791a923b449460459dbe">SetAuthorizedGroup</a>(<span class="keywordtype">string</span> groupName)</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        {</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <span class="keywordflow">if</span> (groupName == null)</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                TheDroidsWereLookingFor = null;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                var config = Properties.Settings.Default;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                config.AuthorizedGroupSID = null;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                config.Save();</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;ADMIN&quot;</span>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a2e5dea27fe5ea99beb0b1911eaffdaf7">FindTheDroidsWereLookingFor</a>(groupName);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a2e5dea27fe5ea99beb0b1911eaffdaf7">   76</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a2e5dea27fe5ea99beb0b1911eaffdaf7">FindTheDroidsWereLookingFor</a>(<span class="keywordtype">string</span> search = null, <span class="keywordtype">bool</span> useDomain = <span class="keyword">false</span>)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        {</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="comment">//find the group that is authorized to use the tools</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            var pc = <span class="keyword">new</span> PrincipalContext(useDomain ? ContextType.Domain : ContextType.Machine);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            var config = Properties.Settings.Default;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            var groupName = search ?? config.AuthorizedGroupSID;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <span class="keywordflow">if</span> (String.IsNullOrWhiteSpace(groupName))</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            var gp = GroupPrincipal.FindByIdentity(pc, search != null ? IdentityType.Name : IdentityType.Sid, groupName);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">if</span> (gp == null)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                <span class="keywordflow">if</span> (search != null)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                    <span class="comment">//try again with all types</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                    gp = GroupPrincipal.FindByIdentity(pc, search);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                <span class="keywordflow">if</span> (gp == null)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                    <span class="keywordflow">return</span> useDomain ? null : <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a2e5dea27fe5ea99beb0b1911eaffdaf7">FindTheDroidsWereLookingFor</a>(search, <span class="keyword">true</span>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            TheDroidsWereLookingFor = gp.Sid;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="keywordflow">if</span> (search != null)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                config.AuthorizedGroupSID = TheDroidsWereLookingFor.Value;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                config.Save();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            <span class="keywordflow">return</span> gp.Name;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        </div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a7a5e21a235e202744184c8e25a6a5d86">  107</a></span>&#160;        <span class="keyword">protected</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a7a5e21a235e202744184c8e25a6a5d86">CheckAccessCore</a>(OperationContext operationContext)</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            var contract = operationContext.EndpointDispatcher.ContractName;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keywordflow">if</span> (contract == typeof(<a class="code" href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_connectivity.html">ITGConnectivity</a>).Name)   <span class="comment">//always allow connectivity checks</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            var windowsIdent = operationContext.ServiceSecurityContext.WindowsIdentity;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keywordflow">if</span> (contract == typeof(<a class="code" href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_interop.html">ITGInterop</a>).Name)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            {    </div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="comment">//only allow the same user the service is running as to use interop, because that&#39;s what DD is running as, and don&#39;t spam the logs with it unless it fails</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                var result = windowsIdent.User == <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a27f51f5fdaedcb7b20c19cb507ae0940">ServiceSID</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="keywordflow">if</span>(!result)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_service.html">Service</a>.<a class="code" href="class_t_g_server_service_1_1_service.html#a5f6ad886bff03e90360d6ea8fc0c94ad">WriteAccess</a>(windowsIdent.Name, <span class="keyword">false</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            var wp = <span class="keyword">new</span> WindowsPrincipal(windowsIdent);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="comment">//first allow admins</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            var authSuccess = wp.IsInRole(WindowsBuiltInRole.Administrator);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="comment">//if we&#39;re not an admin, check that we aren&#39;t trying to access the admin interface</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">if</span> (!authSuccess &amp;&amp; operationContext.EndpointDispatcher.ContractName != typeof(<a class="code" href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_administration.html">ITGAdministration</a>).Name &amp;&amp; TheDroidsWereLookingFor != null)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                authSuccess = wp.IsInRole(<span class="keyword">new</span> SecurityIdentifier(Properties.Settings.Default.AuthorizedGroupSID));</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            lock (authLock)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                var user = windowsIdent.Name;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keywordflow">if</span> (LastSeenUser != user)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    LastSeenUser = user;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_service.html">Service</a>.<a class="code" href="class_t_g_server_service_1_1_service.html#a5f6ad886bff03e90360d6ea8fc0c94ad">WriteAccess</a>(user, authSuccess);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            }</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">return</span> authSuccess;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a61c8fb2f26cf9d46c59b7677fdbad233">  146</a></span>&#160;        <span class="keyword">public</span> ushort <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a61c8fb2f26cf9d46c59b7677fdbad233">RemoteAccessPort</a>()</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">return</span> Properties.Settings.Default.RemoteAccessPort;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a248a8fbd9ed9e8c08db3dff6b7adba04">  152</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a248a8fbd9ed9e8c08db3dff6b7adba04">SetRemoteAccessPort</a>(ushort port)</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">if</span> (port == 0)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;Cannot bind to port 0&quot;</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            var Config = Properties.Settings.Default;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            Config.RemoteAccessPort = port;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            Config.Save();</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aa8a3c62ea83e029263e21654e184ab80">  163</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aa8a3c62ea83e029263e21654e184ab80">MoveServer</a>(<span class="keywordtype">string</span> new_location)</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            var Config = Properties.Settings.Default;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                var di1 = <span class="keyword">new</span> DirectoryInfo(Config.ServerDirectory);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                var di2 = <span class="keyword">new</span> DirectoryInfo(new_location);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                var copy = di1.Root.FullName != di2.Root.FullName;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                <span class="keywordflow">if</span> (copy &amp;&amp; File.Exists(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a2ab6a2c8f02431003a7b3eee7f453fff">PrivateKeyPath</a>))</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                    <span class="keywordflow">return</span> String.Format(<span class="stringliteral">&quot;Unable to perform a cross drive server move with the {0}. Copy aborted!&quot;</span>, <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a2ab6a2c8f02431003a7b3eee7f453fff">PrivateKeyPath</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                new_location = di2.FullName;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">while</span> (di2.Parent != null)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    <span class="keywordflow">if</span> (di2.Parent.FullName == di1.FullName)</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Cannot move to child of current directory!&quot;</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    <span class="keywordflow">else</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                        di2 = di2.Parent;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <span class="keywordflow">if</span> (!Monitor.TryEnter(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">RepoLock</a>))</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Repo locked!&quot;</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6a5f6fad2c5c52da78eb9d1968c02f9d">RepoBusy</a>)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Repo busy!&quot;</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9b46135f61615923db5e302d3553e1fa">DisposeRepo</a>();</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <span class="keywordflow">if</span> (!Monitor.TryEnter(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a0c663631406c567c006171c5b6bf361f">ByondLock</a>))</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&quot;BYOND locked&quot;</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="keywordflow">try</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a773bda7930c58a1def918b077efcf2a1">updateStat</a> != <a class="code" href="namespace_t_g_service_interface.html#af1c6e932aa16d25cbe05b86e896f3935">ByondStatus</a>.Idle)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                            <span class="keywordflow">return</span> <span class="stringliteral">&quot;BYOND busy!&quot;</span>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        <span class="keywordflow">if</span> (!Monitor.TryEnter(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a43598a044d75089e4c3a0b433bca455b">CompilerLock</a>))</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                            <span class="keywordflow">return</span> <span class="stringliteral">&quot;Compiler locked!&quot;</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        <span class="keywordflow">try</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                            <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9adc6c97daa5981c9b4c6128c4df1f11">compilerCurrentStatus</a> != <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Uninitialized &amp;&amp; <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9adc6c97daa5981c9b4c6128c4df1f11">compilerCurrentStatus</a> != <a class="code" href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">CompilerStatus</a>.Initialized)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                <span class="keywordflow">return</span> <span class="stringliteral">&quot;Compiler busy!&quot;</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                            <span class="keywordflow">if</span> (!Monitor.TryEnter(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">watchdogLock</a>))</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                <span class="keywordflow">return</span> <span class="stringliteral">&quot;Watchdog locked!&quot;</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                            <span class="keywordflow">try</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                            {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#ac30b2fd293b49f890f3a1e32646c6d64">currentStatus</a> != <a class="code" href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">DreamDaemonStatus</a>.Offline)</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Watchdog running!&quot;</span>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                lock (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a4d407c09b7a499c45266c916e4eaa947">configLock</a>)</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af08b470db051748bc99e830bd263d215">CleanGameFolder</a>();</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                    <a class="code" href="class_t_g_server_service_1_1_program.html">Program</a>.<a class="code" href="class_t_g_server_service_1_1_program.html#af23c01e40193036d8b54ca95efb5b229">DeleteDirectory</a>(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aae521c4c39e87f29fc7cba98c0ff58d7">GameDir</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                    <span class="keywordtype">string</span> error = null;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                    <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                    {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                                        <a class="code" href="class_t_g_server_service_1_1_program.html">Program</a>.<a class="code" href="class_t_g_server_service_1_1_program.html#ae1290ddee2583742124827bad8d68f23">CopyDirectory</a>(Config.ServerDirectory, new_location);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                        Directory.CreateDirectory(new_location);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                        Environment.CurrentDirectory = new_location;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                        <span class="keywordflow">try</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                        {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                            <a class="code" href="class_t_g_server_service_1_1_program.html">Program</a>.<a class="code" href="class_t_g_server_service_1_1_program.html#af23c01e40193036d8b54ca95efb5b229">DeleteDirectory</a>(Config.ServerDirectory);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                        }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                                        <span class="keywordflow">catch</span> (Exception e)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                        {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                            error = <span class="stringliteral">&quot;The move was successful, but the path &quot;</span> + Config.ServerDirectory + <span class="stringliteral">&quot; was unable to be deleted fully!&quot;</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                            <a class="code" href="class_t_g_server_service_1_1_service.html">Service</a>.<a class="code" href="class_t_g_server_service_1_1_service.html#ae3c4dfb35fce33f3462633036bc5af14">WriteWarning</a>(String.Format(<span class="stringliteral">&quot;Server move from {0} to {1} partial success: {2}&quot;</span>, Config.ServerDirectory, new_location, e.ToString()), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.ServerMovePartial);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                        }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                    }</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                    <span class="keywordflow">else</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                    {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                        <span class="keywordflow">try</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                                        {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                            Environment.CurrentDirectory = di2.Root.FullName;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                            Directory.Move(Config.ServerDirectory, new_location);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                                            Environment.CurrentDirectory = new_location;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                        }</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                        <span class="keywordflow">catch</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                        {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                            Environment.CurrentDirectory = Config.ServerDirectory;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                            <span class="keywordflow">throw</span>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                        }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                    }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                                    <a class="code" href="class_t_g_server_service_1_1_service.html">Service</a>.<a class="code" href="class_t_g_server_service_1_1_service.html#ac90d464e7982312e0a43f1d710bd83a9">WriteInfo</a>(String.Format(<span class="stringliteral">&quot;Server moved from {0} to {1}&quot;</span>, Config.ServerDirectory, new_location), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.ServerMoveComplete);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                    Config.ServerDirectory = new_location;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                    <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                            }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                            <span class="keywordflow">finally</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                            {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                Monitor.Exit(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">watchdogLock</a>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                            }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                        }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        <span class="keywordflow">finally</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                        {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                            Monitor.Exit(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a43598a044d75089e4c3a0b433bca455b">CompilerLock</a>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                        }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                    <span class="keywordflow">finally</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                    {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                        Monitor.Exit(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a0c663631406c567c006171c5b6bf361f">ByondLock</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="keywordflow">finally</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                    Monitor.Exit(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">RepoLock</a>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">catch</span> (Exception e)</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_service.html">Service</a>.<a class="code" href="class_t_g_server_service_1_1_service.html#a103b806b056a42886318a9f0422a865c">WriteError</a>(String.Format(<span class="stringliteral">&quot;Server move from {0} to {1} failed: {2}&quot;</span>, Config.ServerDirectory, new_location, e.ToString()), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.ServerMoveFailed);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="keywordflow">return</span> e.ToString();</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aeb8f7b25f00c15aed0b80f2e0cff6ef4">  277</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aeb8f7b25f00c15aed0b80f2e0cff6ef4">RecreateStaticFolder</a>()</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">if</span> (!Monitor.TryEnter(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">RepoLock</a>))</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <span class="keywordflow">return</span> <span class="stringliteral">&quot;Repo locked!&quot;</span>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="keywordflow">if</span> (!Monitor.TryEnter(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">watchdogLock</a>))</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Watchdog locked!&quot;</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                    <span class="keywordflow">if</span> (!Monitor.TryEnter(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a4d407c09b7a499c45266c916e4eaa947">configLock</a>))</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Static dir locked!&quot;</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                    <span class="keywordflow">try</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#ac30b2fd293b49f890f3a1e32646c6d64">currentStatus</a> != <a class="code" href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">DreamDaemonStatus</a>.Offline)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                            <span class="keywordflow">return</span> <span class="stringliteral">&quot;Watchdog running!&quot;</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a15a3ebcbd0237e65264d9ca2533291ce">BackupAndDeleteStaticDirectory</a>();</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a5ce4ab9dd00a38f8e434a54ef8978dde">InitialConfigureRepository</a>();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    <span class="keywordflow">finally</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                    {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                        Monitor.Exit(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a4d407c09b7a499c45266c916e4eaa947">configLock</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                    }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="keywordflow">finally</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    Monitor.Exit(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">watchdogLock</a>);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">catch</span>(Exception e)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                <span class="keywordflow">return</span> e.ToString();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            <span class="keywordflow">finally</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                Monitor.Exit(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">RepoLock</a>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;            }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="ttc" id="namespace_t_g_service_interface_1_1_components_html"><div class="ttname"><a href="namespace_t_g_service_interface_1_1_components.html">TGServiceInterface.Components</a></div><div class="ttdef"><b>Definition:</b> <a href="_t_g_service_interface_2_components_2_administration_8cs_source.html#l00003">Administration.cs:3</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a4d407c09b7a499c45266c916e4eaa947"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a4d407c09b7a499c45266c916e4eaa947">TGServerService.ServerInstance.configLock</a></div><div class="ttdeci">object configLock</div><div class="ttdoc">Used for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00015">Config.cs:15</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9b46135f61615923db5e302d3553e1fa"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9b46135f61615923db5e302d3553e1fa">TGServerService.ServerInstance.DisposeRepo</a></div><div class="ttdeci">void DisposeRepo()</div><div class="ttdoc">Cleans up Repo </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00174">Repository.cs:174</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aeb8f7b25f00c15aed0b80f2e0cff6ef4"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aeb8f7b25f00c15aed0b80f2e0cff6ef4">TGServerService.ServerInstance.RecreateStaticFolder</a></div><div class="ttdeci">string RecreateStaticFolder()</div><div class="ttdoc">Renames the current static folder to a backup name and recreates is from the current repo using TGS3...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00277">Administration.cs:277</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a17fd1cd46cd9791a923b449460459dbe"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a17fd1cd46cd9791a923b449460459dbe">TGServerService.ServerInstance.SetAuthorizedGroup</a></div><div class="ttdeci">string SetAuthorizedGroup(string groupName)</div><div class="ttdoc">Searches the windows machine for the group named groupName , sets it as the authorized group if it&amp;#39;s ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00057">Administration.cs:57</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aac9358eb96d27250fb77c78695e90128"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">TGServerService.ServerInstance.watchdogLock</a></div><div class="ttdeci">object watchdogLock</div><div class="ttdoc">Used for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00053">DreamDaemon.cs:53</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_ac90d464e7982312e0a43f1d710bd83a9"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#ac90d464e7982312e0a43f1d710bd83a9">TGServerService.Service.WriteInfo</a></div><div class="ttdeci">static void WriteInfo(string message, EventID id)</div><div class="ttdoc">Writes information to Windows the event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00040">Service.cs:40</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ac2213c2ab6ad583b472de4176b3d8588"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ac2213c2ab6ad583b472de4176b3d8588">TGServerService.ServerInstance.GetCurrentAuthorizedGroup</a></div><div class="ttdeci">string GetCurrentAuthorizedGroup()</div><div class="ttdoc">Returns the name of the windows group allowed to use the service other than administrator  ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00035">Administration.cs:35</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_html_a98d8f6303b894422167c743e15185398"><div class="ttname"><a href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">TGServerService.EventID</a></div><div class="ttdeci">EventID</div><div class="ttdoc">Various events and their IDs in no particular order. Found in the Windows event log. These incremented by 100 and are guaranteed to never be reused in the future. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults </div><div class="ttdef"><b>Definition:</b> <a href="_event_i_d_8cs_source.html#l00008">EventID.cs:8</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html">TGServerService.Service</a></div><div class="ttdoc">The windows service the application runs as </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00015">Service.cs:15</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html">TGServerService.ServerInstance</a></div><div class="ttdoc">The class which holds all interface components. There are no safeguards for call race conditions so t...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00014">Administration.cs:14</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a27f51f5fdaedcb7b20c19cb507ae0940"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a27f51f5fdaedcb7b20c19cb507ae0940">TGServerService.ServerInstance.ServiceSID</a></div><div class="ttdeci">readonly SecurityIdentifier ServiceSID</div><div class="ttdoc">The SecurityIdentifier of the account the Service is running as </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00032">Administration.cs:32</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ac30b2fd293b49f890f3a1e32646c6d64"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ac30b2fd293b49f890f3a1e32646c6d64">TGServerService.ServerInstance.currentStatus</a></div><div class="ttdeci">DreamDaemonStatus currentStatus</div><div class="ttdoc">The DreamDaemonStatus of Proc </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00061">DreamDaemon.cs:61</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a7a5e21a235e202744184c8e25a6a5d86"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a7a5e21a235e202744184c8e25a6a5d86">TGServerService.ServerInstance.CheckAccessCore</a></div><div class="ttdeci">override bool CheckAccessCore(OperationContext operationContext)</div><div class="ttdoc">Called by WCF whenever a component call is made. Checks to see that the supplied user account has acc...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00107">Administration.cs:107</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_ae3c4dfb35fce33f3462633036bc5af14"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#ae3c4dfb35fce33f3462633036bc5af14">TGServerService.Service.WriteWarning</a></div><div class="ttdeci">static void WriteWarning(string message, EventID id)</div><div class="ttdoc">Writes a warning to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00058">Service.cs:58</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9adc6c97daa5981c9b4c6128c4df1f11"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9adc6c97daa5981c9b4c6128c4df1f11">TGServerService.ServerInstance.compilerCurrentStatus</a></div><div class="ttdeci">CompilerStatus compilerCurrentStatus</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00041">Compiler.cs:41</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a099e2fa5d7fe81467538a56467c9906c"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a099e2fa5d7fe81467538a56467c9906c">TGServerService.ServerInstance.TheDroidsWereLookingFor</a></div><div class="ttdeci">SecurityIdentifier TheDroidsWereLookingFor</div><div class="ttdoc">The SecurityIdentifier of the Windows group authorized to access the ServerInstance ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00019">Administration.cs:19</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a6a5f6fad2c5c52da78eb9d1968c02f9d"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a6a5f6fad2c5c52da78eb9d1968c02f9d">TGServerService.ServerInstance.RepoBusy</a></div><div class="ttdeci">bool RepoBusy</div><div class="ttdoc">Used in conjunction with RepoLock for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00069">Repository.cs:69</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_af08b470db051748bc99e830bd263d215"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#af08b470db051748bc99e830bd263d215">TGServerService.ServerInstance.CleanGameFolder</a></div><div class="ttdeci">void CleanGameFolder()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00138">Compiler.cs:138</a></div></div>
<div class="ttc" id="interface_t_g_service_interface_1_1_components_1_1_i_t_g_connectivity_html"><div class="ttname"><a href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_connectivity.html">TGServiceInterface.Components.ITGConnectivity</a></div><div class="ttdoc">Used for testing connections to the service without authentication </div><div class="ttdef"><b>Definition:</b> <a href="_connectivity_8cs_source.html#l00009">Connectivity.cs:9</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a1859affa82dede4f2ed907a7d6958529"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a1859affa82dede4f2ed907a7d6958529">TGServerService.ServerInstance.LastSeenUser</a></div><div class="ttdeci">string LastSeenUser</div><div class="ttdoc">The WindowsIdentity.Name of the last WindowsIdentity to attempt to access the ServerInstance ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00027">Administration.cs:27</a></div></div>
<div class="ttc" id="interface_t_g_service_interface_1_1_components_1_1_i_t_g_administration_html"><div class="ttname"><a href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_administration.html">TGServiceInterface.Components.ITGAdministration</a></div><div class="ttdoc">Manage the group that is used to access the service, can only be used by an administrator ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_service_interface_2_components_2_administration_8cs_source.html#l00009">Administration.cs:9</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aa8a3c62ea83e029263e21654e184ab80"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aa8a3c62ea83e029263e21654e184ab80">TGServerService.ServerInstance.MoveServer</a></div><div class="ttdeci">string MoveServer(string new_location)</div><div class="ttdoc">Moves the entire server installation, requires no operations to be running  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00163">Administration.cs:163</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a2ab6a2c8f02431003a7b3eee7f453fff"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a2ab6a2c8f02431003a7b3eee7f453fff">TGServerService.ServerInstance.PrivateKeyPath</a></div><div class="ttdeci">const string PrivateKeyPath</div><div class="ttdoc">The path to the private ssh-rsa key file </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00044">Repository.cs:44</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a248a8fbd9ed9e8c08db3dff6b7adba04"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a248a8fbd9ed9e8c08db3dff6b7adba04">TGServerService.ServerInstance.SetRemoteAccessPort</a></div><div class="ttdeci">string SetRemoteAccessPort(ushort port)</div><div class="ttdoc">Set the port used for remote operation Requires a service restart to take effect  ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00152">Administration.cs:152</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a5ce4ab9dd00a38f8e434a54ef8978dde"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a5ce4ab9dd00a38f8e434a54ef8978dde">TGServerService.ServerInstance.InitialConfigureRepository</a></div><div class="ttdeci">void InitialConfigureRepository()</div><div class="ttdoc">Initial setup for the StaticDirs and CachedTGS3SettingsPath </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00336">Repository.cs:336</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a3d9e7ee0d819cee495bd78f9a54c46fd"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a3d9e7ee0d819cee495bd78f9a54c46fd">TGServerService.ServerInstance.authLock</a></div><div class="ttdeci">object authLock</div><div class="ttdoc">Used for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00023">Administration.cs:23</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9b7cd7bdfe31916e6818245e2354d0cc"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9b7cd7bdfe31916e6818245e2354d0cc">TGServerService.ServerInstance.RepoLock</a></div><div class="ttdeci">object RepoLock</div><div class="ttdoc">Used in conjunction with RepoBusy for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00065">Repository.cs:65</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html_af50082a408f9ae6f37a053a7a2464ef3"><div class="ttname"><a href="namespace_t_g_service_interface.html#af50082a408f9ae6f37a053a7a2464ef3">TGServiceInterface.CompilerStatus</a></div><div class="ttdeci">CompilerStatus</div><div class="ttdoc">The status of the compiler </div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00091">Enumerations.cs:91</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html_af1c6e932aa16d25cbe05b86e896f3935"><div class="ttname"><a href="namespace_t_g_service_interface.html#af1c6e932aa16d25cbe05b86e896f3935">TGServiceInterface.ByondStatus</a></div><div class="ttdeci">ByondStatus</div><div class="ttdoc">The status of a BYOND update job </div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00006">Enumerations.cs:6</a></div></div>
<div class="ttc" id="class_service_authorization_manager_html"><div class="ttname"><a href="class_service_authorization_manager.html">ServiceAuthorizationManager</a></div></div>
<div class="ttc" id="_t_g_command_line_2_program_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_t_g_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">﻿using System</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_command_line_2_program_8cs_source.html#l00001">Program.cs:1</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a2e5dea27fe5ea99beb0b1911eaffdaf7"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a2e5dea27fe5ea99beb0b1911eaffdaf7">TGServerService.ServerInstance.FindTheDroidsWereLookingFor</a></div><div class="ttdeci">string FindTheDroidsWereLookingFor(string search=null, bool useDomain=false)</div><div class="ttdoc">Set TheDroidsWereLookingFor based off either an search ed name or a string SecurityIdentifier from th...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00076">Administration.cs:76</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html"><div class="ttname"><a href="namespace_t_g_service_interface.html">TGServiceInterface</a></div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00006">ChatSetupInfo.cs:6</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a43598a044d75089e4c3a0b433bca455b"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a43598a044d75089e4c3a0b433bca455b">TGServerService.ServerInstance.CompilerLock</a></div><div class="ttdeci">object CompilerLock</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00040">Compiler.cs:40</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a15a3ebcbd0237e65264d9ca2533291ce"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a15a3ebcbd0237e65264d9ca2533291ce">TGServerService.ServerInstance.BackupAndDeleteStaticDirectory</a></div><div class="ttdeci">void BackupAndDeleteStaticDirectory()</div><div class="ttdoc">Copies the Static directory to the first available Static_BACKUP path in the ServerInstance then dele...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00293">Repository.cs:293</a></div></div>
<div class="ttc" id="interface_t_g_service_interface_1_1_components_1_1_i_t_g_interop_html"><div class="ttname"><a href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_interop.html">TGServiceInterface.Components.ITGInterop</a></div><div class="ttdoc">Used by DD to access the interop API with call()() </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_service_interface_2_components_2_interop_8cs_source.html#l00009">Interop.cs:9</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_a103b806b056a42886318a9f0422a865c"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#a103b806b056a42886318a9f0422a865c">TGServerService.Service.WriteError</a></div><div class="ttdeci">static void WriteError(string message, EventID id)</div><div class="ttdoc">Writes an error to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00049">Service.cs:49</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a61c8fb2f26cf9d46c59b7677fdbad233"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a61c8fb2f26cf9d46c59b7677fdbad233">TGServerService.ServerInstance.RemoteAccessPort</a></div><div class="ttdeci">ushort RemoteAccessPort()</div><div class="ttdoc">Get the port used for remote operation  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00146">Administration.cs:146</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_program_html_ae1290ddee2583742124827bad8d68f23"><div class="ttname"><a href="class_t_g_server_service_1_1_program.html#ae1290ddee2583742124827bad8d68f23">TGServerService.Program.CopyDirectory</a></div><div class="ttdeci">static void CopyDirectory(string sourceDirName, string destDirName, IList&lt; string &gt; ignore=null, bool ignoreIfNotExists=false)</div><div class="ttdoc">Recusively copy a directory </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_program_8cs_source.html#l00104">Program.cs:104</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aae521c4c39e87f29fc7cba98c0ff58d7"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aae521c4c39e87f29fc7cba98c0ff58d7">TGServerService.ServerInstance.GameDir</a></div><div class="ttdeci">const string GameDir</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00028">Compiler.cs:28</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a773bda7930c58a1def918b077efcf2a1"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a773bda7930c58a1def918b077efcf2a1">TGServerService.ServerInstance.updateStat</a></div><div class="ttdeci">ByondStatus updateStat</div><div class="ttdoc">The status of the BYOND updater </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00059">Byond.cs:59</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a0c663631406c567c006171c5b6bf361f"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a0c663631406c567c006171c5b6bf361f">TGServerService.ServerInstance.ByondLock</a></div><div class="ttdeci">object ByondLock</div><div class="ttdoc">Used for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00064">Byond.cs:64</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_html"><div class="ttname"><a href="namespace_t_g_server_service.html">TGServerService</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_program_html_af23c01e40193036d8b54ca95efb5b229"><div class="ttname"><a href="class_t_g_server_service_1_1_program.html#af23c01e40193036d8b54ca95efb5b229">TGServerService.Program.DeleteDirectory</a></div><div class="ttdeci">static void DeleteDirectory(string path, bool ContentsOnly=false, IList&lt; string &gt; excludeRoot=null)</div><div class="ttdoc">Recursive directory deleter </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_program_8cs_source.html#l00037">Program.cs:37</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_a5f6ad886bff03e90360d6ea8fc0c94ad"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#a5f6ad886bff03e90360d6ea8fc0c94ad">TGServerService.Service.WriteAccess</a></div><div class="ttdeci">static void WriteAccess(string username, bool authSuccess)</div><div class="ttdoc">Writes an access event to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00068">Service.cs:68</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html_a8d0a8727304bcbf3c0b9967701e533e9"><div class="ttname"><a href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">TGServiceInterface.DreamDaemonStatus</a></div><div class="ttdeci">DreamDaemonStatus</div><div class="ttdoc">The status of the DD instance </div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00114">Enumerations.cs:114</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_program_html"><div class="ttname"><a href="class_t_g_server_service_1_1_program.html">TGServerService.Program</a></div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_program_8cs_source.html#l00007">Program.cs:7</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
