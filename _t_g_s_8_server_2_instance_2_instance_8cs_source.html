<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tgstation-server: TGS.Server/Instance/Instance.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tgstation-server
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d416ca425b5524beda4d68f02698bdb3.html">TGS.Server</a></li><li class="navelem"><a class="el" href="dir_247dc62efdba86a5141239c39fc82c17.html">Instance</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Instance.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_t_g_s_8_server_2_instance_2_instance_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="_t_g_s_8_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Diagnostics;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.IO;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.ServiceModel;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_s.html">TGS</a>.<a class="code" href="namespace_t_g_s_1_1_interface.html">Interface</a>.<a class="code" href="namespace_t_g_s_1_1_interface_1_1_components.html">Components</a>;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_t_g_s.html">TGS</a>.Server</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;{</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    <span class="comment">//I know the fact that this is one massive partial class is gonna trigger everyone</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="comment">//There really was no other succinct way to do it (&lt;= He&#39;s lying through his teeth, don&#39;t listen to him)</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <span class="comment">//this line basically says take one instance of the service, use it multithreaded for requests, and never delete it</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    [ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single)]</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    sealed <span class="keyword">partial class </span>Instance : <a class="code" href="class_i_disposable.html">IDisposable</a>, <a class="code" href="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_connectivity.html">ITGConnectivity</a>, <a class="code" href="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_instance.html">ITGInstance</a></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    {</div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#aed67602a10e95dbf4cd053fb65871ed8">   23</a></span>&#160;        <span class="keyword">public</span> readonly byte <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#aed67602a10e95dbf4cd053fb65871ed8">LoggingID</a>;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a2806f79ad9e9b76b0d78b0c12aae702b">   27</a></span>&#160;        readonly <a class="code" href="interface_t_g_s_1_1_server_1_1_i_instance_config.html">IInstanceConfig</a> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a2806f79ad9e9b76b0d78b0c12aae702b">Config</a>;</div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a3324d5c44b33771c86fe738b0593a136">   31</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a3324d5c44b33771c86fe738b0593a136">Instance</a>(<a class="code" href="interface_t_g_s_1_1_server_1_1_i_instance_config.html">IInstanceConfig</a> config, byte logID)</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            LoggingID = logID;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            Config = config;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            FindTheDroidsWereLookingFor();</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            InitEventHandlers();</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            InitChat();</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            InitRepo();</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            InitByond();</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            InitDreamDaemon();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;            InitCompiler();</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        }</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#acf248d713b745dadacbf24ca7d50c155">   47</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#acf248d713b745dadacbf24ca7d50c155">RunDisposals</a>()</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            DisposeDreamDaemon();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            DisposeCompiler();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            DisposeByond();</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            DisposeRepo();</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            DisposeChat();</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            DisposeAdministration();</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            Config.Save();</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        }</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a96b7ed16c1e2bd19f9ccd4bed36085e4">   63</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a96b7ed16c1e2bd19f9ccd4bed36085e4">WriteInfo</a>(<span class="keywordtype">string</span> message, <a class="code" href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">EventID</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            <a class="code" href="class_t_g_s_1_1_server_1_1_server.html">Server</a>.<a class="code" href="class_t_g_s_1_1_server_1_1_server.html#a1d74616cab26fd2b954f87e6a9b911a6">Logger</a>.<a class="code" href="interface_t_g_s_1_1_server_1_1_i_logger.html#a82dc045489599aad6fc83358c77c5d59">WriteInfo</a>(message, <span class="keywordtype">id</span>, LoggingID);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a85d0b54fc049736f16cdf42f24d34058">   73</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a85d0b54fc049736f16cdf42f24d34058">WriteError</a>(<span class="keywordtype">string</span> message, <a class="code" href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">EventID</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <a class="code" href="class_t_g_s_1_1_server_1_1_server.html">Server</a>.<a class="code" href="class_t_g_s_1_1_server_1_1_server.html#a1d74616cab26fd2b954f87e6a9b911a6">Logger</a>.<a class="code" href="interface_t_g_s_1_1_server_1_1_i_logger.html#a320c5301783a61ec8c6178e3bc15d97d">WriteError</a>(message, <span class="keywordtype">id</span>, LoggingID);</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a09f621172ed237a1dfc35de87b3095bb">   83</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a09f621172ed237a1dfc35de87b3095bb">WriteWarning</a>(<span class="keywordtype">string</span> message, <a class="code" href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">EventID</a> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <a class="code" href="class_t_g_s_1_1_server_1_1_server.html">Server</a>.<a class="code" href="class_t_g_s_1_1_server_1_1_server.html#a1d74616cab26fd2b954f87e6a9b911a6">Logger</a>.<a class="code" href="interface_t_g_s_1_1_server_1_1_i_logger.html#a9430e22233d40a9faeaf2da97740ff78">WriteWarning</a>(message, <span class="keywordtype">id</span>, LoggingID);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a09d2c1cff6528a0588dc873cc0b070ae">   93</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a09d2c1cff6528a0588dc873cc0b070ae">WriteAccess</a>(<span class="keywordtype">string</span> username, <span class="keywordtype">bool</span> authSuccess)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <a class="code" href="class_t_g_s_1_1_server_1_1_server.html">Server</a>.<a class="code" href="class_t_g_s_1_1_server_1_1_server.html#a1d74616cab26fd2b954f87e6a9b911a6">Logger</a>.<a class="code" href="interface_t_g_s_1_1_server_1_1_i_logger.html#aeb2d4a0a1a776677e5ab6e0e502d3afd">WriteAccess</a>(String.Format(<span class="stringliteral">&quot;Access from: {0}&quot;</span>, username), authSuccess, LoggingID);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#afe067e70a0c0799b49fc2cf289d611f9">  102</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#afe067e70a0c0799b49fc2cf289d611f9">RelativePath</a>(<span class="keywordtype">string</span> path)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">return</span> Path.Combine(Config.Directory, path);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a06fedfc5265b7b47b9d38b518d1bcdfd">  108</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a06fedfc5265b7b47b9d38b518d1bcdfd">Version</a>()</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="class_t_g_s_1_1_server_1_1_server.html">Server</a>.<a class="code" href="class_t_g_s_1_1_server_1_1_server.html#a822f4126695b19deb476485057021851">VersionString</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a5c80cb3d150ddfeaed1fc172c08d975c">  114</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a5c80cb3d150ddfeaed1fc172c08d975c">VerifyConnection</a>() { }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#adc21c412fa14d5b973a89ee126bae009">  117</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#adc21c412fa14d5b973a89ee126bae009">Reattach</a>(<span class="keywordtype">bool</span> silent)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            Config.ReattachRequired = <span class="keyword">true</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">if</span>(!silent)</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                SendMessage(<span class="stringliteral">&quot;SERVICE: Update started...&quot;</span>, <a class="code" href="namespace_t_g_s_1_1_server.html#ac244e362b52b9feac67ac6c2ca27f522">MessageType</a>.DeveloperInfo);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        }</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a6e90c4b818594f97eea58aba15d4ac90">  125</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a6e90c4b818594f97eea58aba15d4ac90">ServerDirectory</a>()</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">return</span> Config.Directory;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a914861dfc8cc51138398add5530ce315">  133</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a914861dfc8cc51138398add5530ce315">Offline</a>()</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            Config.Enabled = <span class="keyword">false</span>;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="comment">//mostly generated code with a call to RunDisposals()</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="comment">//you don&#39;t need to open this</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">        #region IDisposable Support</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keyword">private</span> <span class="keywordtype">bool</span> disposedValue = <span class="keyword">false</span>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a4f9f6aad82c5d499e7c03ef8cf94dad6">  150</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a4f9f6aad82c5d499e7c03ef8cf94dad6">Dispose</a>(<span class="keywordtype">bool</span> disposing)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">if</span> (!disposedValue)</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="keywordflow">if</span> (disposing)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    RunDisposals();</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    <span class="comment">// TODO: dispose managed state (managed objects).</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="comment">// TODO: free unmanaged resources (unmanaged objects) and override a finalizer below.</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <span class="comment">// TODO: set large fields to null.</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                disposedValue = <span class="keyword">true</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="comment">// TODO: override a finalizer only if Dispose(bool disposing) above has code to free unmanaged resources.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="comment">// ~TGStationServer() {</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">//   // Do not change this code. Put cleanup code in Dispose(bool disposing) above.</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">//   Dispose(false);</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">// }</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">// This code added to correctly implement the disposable pattern.</span></div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a7984437076eaf2223f136c6f029428d1">  177</a></span>&#160;<span class="comment"></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a7984437076eaf2223f136c6f029428d1">Dispose</a>()</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        {</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="comment">// Do not change this code. Put cleanup code in Dispose(bool disposing) above.</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            Dispose(<span class="keyword">true</span>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            <span class="comment">// TODO: uncomment the following line if the finalizer is overridden above.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="comment">// GC.SuppressFinalize(this);</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">        #endregion</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;}</div><div class="ttc" id="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_connectivity_html"><div class="ttname"><a href="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_connectivity.html">TGS.Interface.Components.ITGConnectivity</a></div><div class="ttdoc">Used for testing connections to the service without authentication </div><div class="ttdef"><b>Definition:</b> <a href="_connectivity_8cs_source.html#l00009">Connectivity.cs:9</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a96b7ed16c1e2bd19f9ccd4bed36085e4"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a96b7ed16c1e2bd19f9ccd4bed36085e4">TGS.Server.Instance.WriteInfo</a></div><div class="ttdeci">void WriteInfo(string message, EventID id)</div><div class="ttdoc">Writes information to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00063">Instance.cs:63</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_i_instance_config_html"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_i_instance_config.html">TGS.Server.IInstanceConfig</a></div><div class="ttdoc">Configuration settings for a Instance </div><div class="ttdef"><b>Definition:</b> <a href="_instance_config_8cs_source.html#l00010">InstanceConfig.cs:10</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_instance_html"><div class="ttname"><a href="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_instance.html">TGS.Interface.Components.ITGInstance</a></div><div class="ttdoc">Metadata for a server instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_interface_2_components_2_instance_8cs_source.html#l00009">Instance.cs:9</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a6e90c4b818594f97eea58aba15d4ac90"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a6e90c4b818594f97eea58aba15d4ac90">TGS.Server.Instance.ServerDirectory</a></div><div class="ttdeci">string ServerDirectory()</div><div class="ttdoc">Return the directory of the server on the host machine  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00125">Instance.cs:125</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_adc21c412fa14d5b973a89ee126bae009"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#adc21c412fa14d5b973a89ee126bae009">TGS.Server.Instance.Reattach</a></div><div class="ttdeci">void Reattach(bool silent)</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00117">Instance.cs:117</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a06fedfc5265b7b47b9d38b518d1bcdfd"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a06fedfc5265b7b47b9d38b518d1bcdfd">TGS.Server.Instance.Version</a></div><div class="ttdeci">string Version()</div><div class="ttdoc">Retrieve&amp;#39;s the service&amp;#39;s version  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00108">Instance.cs:108</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_interface_html"><div class="ttname"><a href="namespace_t_g_s_1_1_interface.html">TGS.Interface</a></div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00006">ChatSetupInfo.cs:6</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a85d0b54fc049736f16cdf42f24d34058"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a85d0b54fc049736f16cdf42f24d34058">TGS.Server.Instance.WriteError</a></div><div class="ttdeci">void WriteError(string message, EventID id)</div><div class="ttdoc">Writes an error to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00073">Instance.cs:73</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a09d2c1cff6528a0588dc873cc0b070ae"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a09d2c1cff6528a0588dc873cc0b070ae">TGS.Server.Instance.WriteAccess</a></div><div class="ttdeci">void WriteAccess(string username, bool authSuccess)</div><div class="ttdoc">Writes an access event to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00093">Instance.cs:93</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_i_logger_html_a9430e22233d40a9faeaf2da97740ff78"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_i_logger.html#a9430e22233d40a9faeaf2da97740ff78">TGS.Server.ILogger.WriteWarning</a></div><div class="ttdeci">void WriteWarning(string message, EventID id, byte loggingID)</div><div class="ttdoc">Writes a warning to the log </div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_server_html_a822f4126695b19deb476485057021851"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_server.html#a822f4126695b19deb476485057021851">TGS.Server.Server.VersionString</a></div><div class="ttdeci">static readonly string VersionString</div><div class="ttdoc">The service version string based on the FileVersionInfo </div><div class="ttdef"><b>Definition:</b> <a href="_server_8cs_source.html#l00033">Server.cs:33</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a3324d5c44b33771c86fe738b0593a136"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a3324d5c44b33771c86fe738b0593a136">TGS.Server.Instance.Instance</a></div><div class="ttdeci">Instance(IInstanceConfig config, byte logID)</div><div class="ttdoc">Constructs and a Instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00031">Instance.cs:31</a></div></div>
<div class="ttc" id="namespace_t_g_s_html"><div class="ttname"><a href="namespace_t_g_s.html">TGS</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a914861dfc8cc51138398add5530ce315"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a914861dfc8cc51138398add5530ce315">TGS.Server.Instance.Offline</a></div><div class="ttdeci">void Offline()</div><div class="ttdoc">Sets InstanceConfig.Enabled of Config to  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00133">Instance.cs:133</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a4f9f6aad82c5d499e7c03ef8cf94dad6"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a4f9f6aad82c5d499e7c03ef8cf94dad6">TGS.Server.Instance.Dispose</a></div><div class="ttdeci">void Dispose(bool disposing)</div><div class="ttdoc">Implements the IDisposable pattern. Calls RunDisposals </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00150">Instance.cs:150</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a7984437076eaf2223f136c6f029428d1"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a7984437076eaf2223f136c6f029428d1">TGS.Server.Instance.Dispose</a></div><div class="ttdeci">void Dispose()</div><div class="ttdoc">Implements the IDisposable pattern </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00177">Instance.cs:177</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_server_html_a1d74616cab26fd2b954f87e6a9b911a6"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_server.html#a1d74616cab26fd2b954f87e6a9b911a6">TGS.Server.Server.Logger</a></div><div class="ttdeci">static ILogger Logger</div><div class="ttdoc">Singleton ILogger </div><div class="ttdef"><b>Definition:</b> <a href="_server_8cs_source.html#l00038">Server.cs:38</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_i_logger_html_a82dc045489599aad6fc83358c77c5d59"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_i_logger.html#a82dc045489599aad6fc83358c77c5d59">TGS.Server.ILogger.WriteInfo</a></div><div class="ttdeci">void WriteInfo(string message, EventID id, byte loggingID)</div><div class="ttdoc">Writes information to the log </div></div>
<div class="ttc" id="_t_g_s_8_command_line_2_program_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_t_g_s_8_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">﻿using System</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_command_line_2_program_8cs_source.html#l00001">Program.cs:1</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a09f621172ed237a1dfc35de87b3095bb"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a09f621172ed237a1dfc35de87b3095bb">TGS.Server.Instance.WriteWarning</a></div><div class="ttdeci">void WriteWarning(string message, EventID id)</div><div class="ttdoc">Writes a warning to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00083">Instance.cs:83</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_server_html_a4682739b9567dc9e4e5c327c253ce311"><div class="ttname"><a href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">TGS.Server.EventID</a></div><div class="ttdeci">EventID</div><div class="ttdoc">Various events and their IDs in no particular order. Found in the Windows event log. These key incremented by 100 and are guaranteed to never be reused in the future. In the windows event viewer, these IDs will be offset by the Instance.LoggingID to distinguish events between instances. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults </div><div class="ttdef"><b>Definition:</b> <a href="_event_i_d_8cs_source.html#l00008">EventID.cs:8</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_afe067e70a0c0799b49fc2cf289d611f9"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#afe067e70a0c0799b49fc2cf289d611f9">TGS.Server.Instance.RelativePath</a></div><div class="ttdeci">string RelativePath(string path)</div><div class="ttdoc">Converts relative paths to full Instance directory paths </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00102">Instance.cs:102</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_server_html_ac244e362b52b9feac67ac6c2ca27f522"><div class="ttname"><a href="namespace_t_g_s_1_1_server.html#ac244e362b52b9feac67ac6c2ca27f522">TGS.Server.MessageType</a></div><div class="ttdeci">MessageType</div><div class="ttdoc">Type of chat message, these may be OR&amp;#39;d together </div><div class="ttdef"><b>Definition:</b> <a href="_message_type_8cs_source.html#l00008">MessageType.cs:8</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a5c80cb3d150ddfeaed1fc172c08d975c"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a5c80cb3d150ddfeaed1fc172c08d975c">TGS.Server.Instance.VerifyConnection</a></div><div class="ttdeci">void VerifyConnection()</div><div class="ttdoc">Does nothing on the server end, but if the call completes, you can be sure you are connected...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00114">Instance.cs:114</a></div></div>
<div class="ttc" id="class_i_disposable_html"><div class="ttname"><a href="class_i_disposable.html">IDisposable</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_acf248d713b745dadacbf24ca7d50c155"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#acf248d713b745dadacbf24ca7d50c155">TGS.Server.Instance.RunDisposals</a></div><div class="ttdeci">void RunDisposals()</div><div class="ttdoc">Cleans up the Instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00047">Instance.cs:47</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a2806f79ad9e9b76b0d78b0c12aae702b"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a2806f79ad9e9b76b0d78b0c12aae702b">TGS.Server.Instance.Config</a></div><div class="ttdeci">readonly IInstanceConfig Config</div><div class="ttdoc">The configuration settings for the instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00027">Instance.cs:27</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_server_html"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_server.html">TGS.Server.Server</a></div><div class="ttdoc">The windows service the application runs as </div><div class="ttdef"><b>Definition:</b> <a href="_server_8cs_source.html#l00018">Server.cs:18</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_interface_1_1_components_html"><div class="ttname"><a href="namespace_t_g_s_1_1_interface_1_1_components.html">TGS.Interface.Components</a></div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_interface_2_components_2_administration_8cs_source.html#l00003">Administration.cs:3</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_i_logger_html_a320c5301783a61ec8c6178e3bc15d97d"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_i_logger.html#a320c5301783a61ec8c6178e3bc15d97d">TGS.Server.ILogger.WriteError</a></div><div class="ttdeci">void WriteError(string message, EventID id, byte loggingID)</div><div class="ttdoc">Writes an error to the log </div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_aed67602a10e95dbf4cd053fb65871ed8"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#aed67602a10e95dbf4cd053fb65871ed8">TGS.Server.Instance.LoggingID</a></div><div class="ttdeci">readonly byte LoggingID</div><div class="ttdoc">Used to assign the instance to event IDs </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_instance_8cs_source.html#l00023">Instance.cs:23</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_i_logger_html_aeb2d4a0a1a776677e5ab6e0e502d3afd"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_i_logger.html#aeb2d4a0a1a776677e5ab6e0e502d3afd">TGS.Server.ILogger.WriteAccess</a></div><div class="ttdeci">void WriteAccess(string username, bool authSuccess, byte loggingID)</div><div class="ttdoc">Writes an access event to the log </div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
