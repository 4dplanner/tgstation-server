<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tgstation-server: TGServerService/ServerInstance/Interop.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tgstation-server
   &#160;<span id="projectnumber">3.2.0.0</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_f220d0611c2e3262469750905b70ffc9.html">TGServerService</a></li><li class="navelem"><a class="el" href="dir_7e4cc728347459cda364f4bf32c2446b.html">ServerInstance</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Interop.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_t_g_server_service_2_server_instance_2_interop_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> <a class="code" href="_t_g_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Net;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Net.Sockets;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Text;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Threading;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Web.Script.Serialization;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Web.Security;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_server_service.html">TGServerService</a>.<a class="code" href="namespace_t_g_server_service_1_1_chat_commands.html">ChatCommands</a>;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_service_interface.html">TGServiceInterface</a>;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_service_interface.html">TGServiceInterface</a>.<a class="code" href="namespace_t_g_service_interface_1_1_components.html">Components</a>;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_t_g_server_service.html">TGServerService</a></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;{</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="comment">//handles talking between the world and us</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    sealed <span class="keyword">partial class </span>ServerInstance : <a class="code" href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_interop.html">ITGInterop</a></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    {</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a8875aeb516888e8ed1007c14302076a1">   19</a></span>&#160;        <span class="keywordtype">object</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8875aeb516888e8ed1007c14302076a1">topicLock</a> = <span class="keyword">new</span> object();</div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a86ec90e265d2179399e7e260d8b99b94">   20</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a86ec90e265d2179399e7e260d8b99b94">CommsKeyLen</a> = 64;</div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a5bc2c5cf72086f7be5ab0360a8b97105">   21</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a5bc2c5cf72086f7be5ab0360a8b97105">serviceCommsKey</a>; <span class="comment">//regenerated every DD restart</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        <span class="comment">//range of supported api versions</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a178ed6d4540e6d79c2d6a3df12640c4e">   24</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a178ed6d4540e6d79c2d6a3df12640c4e">AllowedMajorAPIVersion</a> = 2;</div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a070d3f5a7292c22e7cd0a807a8f73e4a">   25</a></span>&#160;        <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a2e13a465e1c065c58defc0d891822ee5">Version</a> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a070d3f5a7292c22e7cd0a807a8f73e4a">GameAPIVersion</a>;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aac3bf932aa9e0ab3d2d972a8228f8309">   27</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aac3bf932aa9e0ab3d2d972a8228f8309">SPInstanceName</a> = <span class="stringliteral">&quot;server_instance&quot;</span>;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="comment">//See code/modules/server_tools/server_tools.dm for command switch</span></div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a66f4c90ad2f16211acff4bffd38b63c7">   30</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a66f4c90ad2f16211acff4bffd38b63c7">SCHardReboot</a> = <span class="stringliteral">&quot;hard_reboot&quot;</span>;  <span class="comment">//requests that dreamdaemon restarts when the round ends</span></div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a5d2da9246c06fca12ffb4cb7a6aef5d8">   31</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a5d2da9246c06fca12ffb4cb7a6aef5d8">SCGracefulShutdown</a> = <span class="stringliteral">&quot;graceful_shutdown&quot;</span>;  <span class="comment">//requests that dreamdaemon stops when the round ends</span></div><div class="line"><a name="l00032"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a14ef61af60718ccb273ad10c9639d2aa">   32</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a14ef61af60718ccb273ad10c9639d2aa">SCWorldAnnounce</a> = <span class="stringliteral">&quot;world_announce&quot;</span>;    <span class="comment">//sends param &#39;message&#39; to the world</span></div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aba8a60fc349ded697f44a0e46e184784">   33</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aba8a60fc349ded697f44a0e46e184784">SCListCustomCommands</a> = <span class="stringliteral">&quot;list_custom_commands&quot;</span>; <span class="comment">//Get a list of commands supported by the server</span></div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aa56e6ffd2d00621ac72048ff36dbbe89">   34</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aa56e6ffd2d00621ac72048ff36dbbe89">SCAPICompat</a> = <span class="stringliteral">&quot;api_compat&quot;</span>;    <span class="comment">//Tells the server we understand each other</span></div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a860ffd00b1286a975841923fc97b96dc">   35</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a860ffd00b1286a975841923fc97b96dc">SCPlayerCount</a> = <span class="stringliteral">&quot;client_count&quot;</span>;    <span class="comment">//Gets the number of connected client</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aaad9762dd332e48b47c18e07dbe6bdbb">   40</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaad9762dd332e48b47c18e07dbe6bdbb">SRetSuccess</a> = <span class="stringliteral">&quot;SUCCESS&quot;</span>;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a9800fe98bc4ad092f716ffcaf466ec50">   42</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9800fe98bc4ad092f716ffcaf466ec50">SRKillProcess</a> = <span class="stringliteral">&quot;killme&quot;</span>;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a6e6867184406c444e08d9d9c1516e91d">   43</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a6e6867184406c444e08d9d9c1516e91d">SRIRCBroadcast</a> = <span class="stringliteral">&quot;irc&quot;</span>;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a3e3edae60a9304c55a48e8bd50fa0bcf">   44</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a3e3edae60a9304c55a48e8bd50fa0bcf">SRIRCAdminChannelMessage</a> = <span class="stringliteral">&quot;send2irc&quot;</span>;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aeddee6363c31797b1e8a8d9cbc652fad">   45</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aeddee6363c31797b1e8a8d9cbc652fad">SRWorldReboot</a> = <span class="stringliteral">&quot;worldreboot&quot;</span>;</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a1881164dde61f3600adee7d595f84d4c">   46</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a1881164dde61f3600adee7d595f84d4c">SRAPIVersion</a> = <span class="stringliteral">&quot;api_ver&quot;</span>;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a0d937d6309ff1105105779007109e6ce">   48</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a0d937d6309ff1105105779007109e6ce">CCPHelpText</a> = <span class="stringliteral">&quot;help_text&quot;</span>;</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#acb628731687d30da37761dcae1389893">   49</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#acb628731687d30da37761dcae1389893">CCPAdminOnly</a> = <span class="stringliteral">&quot;admin_only&quot;</span>;</div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a3d33a80602850bbfcbc85ea2e1b4e42d">   50</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a3d33a80602850bbfcbc85ea2e1b4e42d">CCPRequiredParameters</a> = <span class="stringliteral">&quot;required_parameters&quot;</span>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">   55</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">BridgeDLLName</a> = <span class="stringliteral">&quot;TGDreamDaemonBridge.dll&quot;</span>;</div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a03e7f3ef4060c38aabf7322f61ecdad2">   59</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a03e7f3ef4060c38aabf7322f61ecdad2">DreamDaemonBridgeNamespace</a> = <span class="stringliteral">&quot;TGDreamDaemonBridge&quot;</span>;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aed41e4ebea7a5a0825e7b96f78c1331b">   63</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aed41e4ebea7a5a0825e7b96f78c1331b">DreamDaemonBridgeType</a> = DreamDaemonBridgeNamespace + <span class="stringliteral">&quot;.DreamDaemonBridge&quot;</span>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#af07a5ca7e8aeb5612b5333d94275e762">   65</a></span>&#160;        List&lt;Command&gt; <a class="code" href="class_t_g_server_service_1_1_server_instance.html#af07a5ca7e8aeb5612b5333d94275e762">ServerChatCommands</a>;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a3a991f102faacdca2faec4a3fd92d9a9">   67</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a3a991f102faacdca2faec4a3fd92d9a9">LoadServerChatCommands</a>()</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        {</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#ab39a3abd504c56e0d217a7ad475506e4">DaemonStatus</a>() != <a class="code" href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">DreamDaemonStatus</a>.Online)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            var json = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaa392248d5913143b6537352190e75e6">SendCommand</a>(SCListCustomCommands);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <span class="keywordflow">if</span> (String.IsNullOrWhiteSpace(json))</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            List&lt;Command&gt; tmp = <span class="keyword">new</span> List&lt;Command&gt;();</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <span class="keywordflow">foreach</span>(var I <span class="keywordflow">in</span> <span class="keyword">new</span> JavaScriptSerializer().Deserialize&lt;IDictionary&lt;string, IDictionary&lt;string, object&gt;&gt;&gt;(json))</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                    tmp.Add(<span class="keyword">new</span> <a class="code" href="class_t_g_server_service_1_1_chat_commands_1_1_server_chat_command.html">ServerChatCommand</a>(I.Key, (<span class="keywordtype">string</span>)I.Value[CCPHelpText], ((<span class="keywordtype">int</span>)I.Value[CCPAdminOnly]) == 1, (<span class="keywordtype">int</span>)I.Value[CCPRequiredParameters]));</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                ServerChatCommands = tmp;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="keywordflow">catch</span> { }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">//raw command string sent here via world.ExportService</span></div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aa2d4ae32c582b1d03b22402dab486e80">   85</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aa2d4ae32c582b1d03b22402dab486e80">HandleCommand</a>(<span class="keywordtype">string</span> cmd)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            var splits = <span class="keyword">new</span> List&lt;string&gt;(cmd.Split(<span class="charliteral">&#39; &#39;</span>));</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            cmd = splits[0];</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            splits.RemoveAt(0);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordtype">bool</span> APIValid;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            lock (topicLock)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                APIValid = <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a84e536f3c962184942e7a5b01bc9ffad">CheckAPIVersionConstraints</a>();</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            }</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keywordflow">if</span> (!APIValid &amp;&amp; cmd != SRAPIVersion)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <span class="keywordflow">return</span>; <span class="comment">//SPEAK THE LANGUAGE!!!</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">switch</span> (cmd)</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">case</span> SRIRCBroadcast:</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;GAME: &quot;</span> + String.Join(<span class="stringliteral">&quot; &quot;</span>, splits), <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.GameInfo);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">case</span> SRKillProcess:</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a8bdb55d2113035b09f1697072e14c873">KillMe</a>();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">case</span> SRIRCAdminChannelMessage:</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">SendMessage</a>(<span class="stringliteral">&quot;RELAY: &quot;</span> + String.Join(<span class="stringliteral">&quot; &quot;</span>, splits), <a class="code" href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">MessageType</a>.AdminInfo);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">case</span> SRWorldReboot:</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a33c09fd7ed6d0907549e1cc08ad74562">WriteInfo</a>(<span class="stringliteral">&quot;World Rebooted&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.WorldReboot);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ac66b59d813dcc51bf26bd90f3b812e8d">WriteCurrentDDLog</a>(<span class="stringliteral">&quot;World rebooted&quot;</span>);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    ServerChatCommands = null;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aff49184e8ceaf6099708b568f09fc4fa">ChatConnectivityCheck</a>();</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                    lock (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a43598a044d75089e4c3a0b433bca455b">CompilerLock</a>)</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    {</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaff75bb9874194c398f76a60c494bbdf">UpdateStaged</a>)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaff75bb9874194c398f76a60c494bbdf">UpdateStaged</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                            lock (topicLock)</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                            {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                GameAPIVersion = null;  <span class="comment">//needs updating</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                            }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a33c09fd7ed6d0907549e1cc08ad74562">WriteInfo</a>(<span class="stringliteral">&quot;Staged update applied&quot;</span>, <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.ServerUpdateApplied);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                        }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                    }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">case</span> SRAPIVersion:</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    lock (topicLock)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                        <span class="keywordflow">try</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                        {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                            GameAPIVersion = <span class="keyword">new</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a2e13a465e1c065c58defc0d891822ee5">Version</a>(splits[0]);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                            <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a84e536f3c962184942e7a5b01bc9ffad">CheckAPIVersionConstraints</a>())</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception();</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                        <span class="keywordflow">catch</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                        {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f6e141cd76aa497dcf72f14c1219017">WriteWarning</a>(String.Format(<span class="stringliteral">&quot;API version of the game ({0}) is incompatible with the current supported API versions (3.{2}.x.x). Interop disabled.&quot;</span>, splits.Count &gt; 1 ? splits[1] : <span class="stringliteral">&quot;NULL&quot;</span>, AllowedMajorAPIVersion), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.APIVersionMismatch);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                            GameAPIVersion = null;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        }</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    <span class="comment">//This needs to be done asyncronously otherwise DD won&#39;t be able to process it, because it&#39;s waiting for THIS THREAD to return</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                    ThreadPool.QueueUserWorkItem(_ =&gt; <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaa392248d5913143b6537352190e75e6">SendCommand</a>(SCAPICompat));</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#aaa392248d5913143b6537352190e75e6">  151</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaa392248d5913143b6537352190e75e6">SendCommand</a>(<span class="keywordtype">string</span> cmd)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            lock (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">watchdogLock</a>)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_t_g_server_service_1_1_server_instance.html#ac30b2fd293b49f890f3a1e32646c6d64">currentStatus</a> != <a class="code" href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">DreamDaemonStatus</a>.Online)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Error: Server Offline!&quot;</span>;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ad13b3094596c77baca6116842d373760">SendTopic</a>(String.Format(<span class="stringliteral">&quot;serviceCommsKey={0};command={1}&quot;</span>, serviceCommsKey, cmd), <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a4e943244934b9768a821aa6ec722ac18">currentPort</a>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#ad4283de03ea6d7f96473c41aa91e5741">  161</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ad4283de03ea6d7f96473c41aa91e5741">PlayerCount</a>()</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <span class="keywordflow">return</span> Convert.ToInt32(<a class="code" href="class_t_g_server_service_1_1_server_instance.html#aaa392248d5913143b6537352190e75e6">SendCommand</a>(SCPlayerCount));</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">catch</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="comment">//requires topiclock</span></div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a84e536f3c962184942e7a5b01bc9ffad">  174</a></span>&#160;        <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a84e536f3c962184942e7a5b01bc9ffad">CheckAPIVersionConstraints</a>()</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="comment">//major will never change for all of TGS3</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <span class="comment">//we treat minor as major, build as minor, and revision as patch</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">return</span> !(GameAPIVersion == null || GameAPIVersion.Minor != <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a178ed6d4540e6d79c2d6a3df12640c4e">AllowedMajorAPIVersion</a>);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="comment">//Fuckery to diddle byond with the right packet to accept our girth</span></div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#ad13b3094596c77baca6116842d373760">  182</a></span>&#160;        <span class="keywordtype">string</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#ad13b3094596c77baca6116842d373760">SendTopic</a>(<span class="keywordtype">string</span> topicdata, ushort port)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="comment">//santize the escape characters in accordance with http://www.byond.com/docs/ref/info.html#/proc/params2list</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            lock (topicLock) {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_t_g_server_service_1_1_server_instance.html#a84e536f3c962184942e7a5b01bc9ffad">CheckAPIVersionConstraints</a>())</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Incompatible API!&quot;</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                StringBuilder stringPacket = <span class="keyword">new</span> StringBuilder();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                stringPacket.Append((<span class="keywordtype">char</span>)<span class="stringliteral">&#39;\x00&#39;</span>, 8);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                stringPacket.Append(<span class="charliteral">&#39;?&#39;</span> + topicdata);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                stringPacket.Append((<span class="keywordtype">char</span>)<span class="stringliteral">&#39;\x00&#39;</span>);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keywordtype">string</span> fullString = stringPacket.ToString();</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                var packet = Encoding.ASCII.GetBytes(fullString);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                packet[1] = 0x83;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                var FinalLength = packet.Length - 4;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">if</span> (FinalLength &gt; UInt16.MaxValue)</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Error: Topic too long&quot;</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                var lengthBytes = BitConverter.GetBytes((ushort)FinalLength);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                packet[2] = lengthBytes[1]; <span class="comment">//fucking endianess</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                packet[3] = lengthBytes[0];</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                var returnedString = <span class="stringliteral">&quot;NULL&quot;</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                var returnedData = <span class="keyword">new</span> byte[UInt16.MaxValue];</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keyword">using</span> (var topicSender = <span class="keyword">new</span> Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp) { SendTimeout = 5000, ReceiveTimeout = 5000 })</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    <span class="keywordflow">try</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                    {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                        topicSender.Connect(IPAddress.Loopback, port);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                        topicSender.Send(packet);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                        <span class="keywordflow">try</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                            topicSender.Receive(returnedData);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                            var raw_string = Encoding.ASCII.GetString(returnedData).TrimEnd(<span class="keyword">new</span> <span class="keywordtype">char</span>[] { (char)0 }).Trim();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                            <span class="keywordflow">if</span> (raw_string.Length &gt; 6)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                returnedString = raw_string.Substring(5, raw_string.Length - 5).Trim();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        <span class="keywordflow">catch</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                        {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                            returnedString = <span class="stringliteral">&quot;Topic recieve error!&quot;</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                        }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        <span class="keywordflow">finally</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                            topicSender.Shutdown(SocketShutdown.Both);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                        }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    <span class="keywordflow">catch</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                    {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Topic delivery failed!&quot;</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    </div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <span class="keywordflow">return</span> returnedString;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="comment">//Every time we make a new DD process we generate a new comms key for security</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">//It&#39;s in world.params[&#39;server_service&#39;]</span></div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a235f24c0d390a379749a478dc5993550">  240</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a235f24c0d390a379749a478dc5993550">GenCommsKey</a>()</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            var charsToRemove = <span class="keyword">new</span> <span class="keywordtype">string</span>[] { <span class="stringliteral">&quot;!&quot;</span>, <span class="stringliteral">&quot;@&quot;</span>, <span class="stringliteral">&quot;#&quot;</span>, <span class="stringliteral">&quot;$&quot;</span>, <span class="stringliteral">&quot;%&quot;</span>, <span class="stringliteral">&quot;^&quot;</span>, <span class="stringliteral">&quot;&amp;&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>, <span class="stringliteral">&quot;(&quot;</span>, <span class="stringliteral">&quot;)&quot;</span>, <span class="stringliteral">&quot;_&quot;</span>, <span class="stringliteral">&quot;-&quot;</span>, <span class="stringliteral">&quot;+&quot;</span>, <span class="stringliteral">&quot;=&quot;</span>, <span class="stringliteral">&quot;[&quot;</span>, <span class="stringliteral">&quot;{&quot;</span>, <span class="stringliteral">&quot;]&quot;</span>, <span class="stringliteral">&quot;}&quot;</span>, <span class="stringliteral">&quot;;&quot;</span>, <span class="stringliteral">&quot;:&quot;</span>, <span class="stringliteral">&quot;&lt;&quot;</span>, <span class="stringliteral">&quot;&gt;&quot;</span>, <span class="stringliteral">&quot;|&quot;</span>, <span class="stringliteral">&quot;.&quot;</span>, <span class="stringliteral">&quot;/&quot;</span>, <span class="stringliteral">&quot;?&quot;</span> };</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            serviceCommsKey = String.Empty;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">do</span> {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                var tmp = Membership.GeneratePassword(CommsKeyLen, 0);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <span class="keywordflow">foreach</span> (var c <span class="keywordflow">in</span> charsToRemove)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                    tmp = tmp.Replace(c, String.Empty);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                serviceCommsKey += tmp;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            } <span class="keywordflow">while</span> (serviceCommsKey.Length &lt; CommsKeyLen);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            serviceCommsKey = serviceCommsKey.Substring(0, CommsKeyLen);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a33c09fd7ed6d0907549e1cc08ad74562">WriteInfo</a>(<span class="stringliteral">&quot;Service Comms Key set to: &quot;</span> + serviceCommsKey, <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.CommsKeySet);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno"><a class="line" href="class_t_g_server_service_1_1_server_instance.html#a31cb383e125fcb094259185112c3ea40">  255</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a31cb383e125fcb094259185112c3ea40">InteropMessage</a>(<span class="keywordtype">string</span> command)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_server_instance.html#aa2d4ae32c582b1d03b22402dab486e80">HandleCommand</a>(command);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <span class="keywordflow">catch</span>(Exception e)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_server_instance.html#a9f6e141cd76aa497dcf72f14c1219017">WriteWarning</a>(String.Format(<span class="stringliteral">&quot;Handle command for \&quot;{0}\&quot; failed: {1}&quot;</span>, command, e.ToString()), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.InteropCallException);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div><div class="ttc" id="namespace_t_g_service_interface_1_1_components_html"><div class="ttname"><a href="namespace_t_g_service_interface_1_1_components.html">TGServiceInterface.Components</a></div><div class="ttdef"><b>Definition:</b> <a href="_t_g_service_interface_2_components_2_administration_8cs_source.html#l00003">Administration.cs:3</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_html_a77ffb8da5e77d0173c9a1a3b8ba0b110"><div class="ttname"><a href="namespace_t_g_server_service.html#a77ffb8da5e77d0173c9a1a3b8ba0b110">TGServerService.MessageType</a></div><div class="ttdeci">MessageType</div><div class="ttdoc">Type of chat message, these may be OR&amp;#39;d together </div><div class="ttdef"><b>Definition:</b> <a href="_message_type_8cs_source.html#l00008">MessageType.cs:8</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ab39a3abd504c56e0d217a7ad475506e4"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ab39a3abd504c56e0d217a7ad475506e4">TGServerService.ServerInstance.DaemonStatus</a></div><div class="ttdeci">DreamDaemonStatus DaemonStatus()</div><div class="ttdoc">Gets the status of DreamDaemon  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00193">DreamDaemon.cs:193</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a1881164dde61f3600adee7d595f84d4c"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a1881164dde61f3600adee7d595f84d4c">TGServerService.ServerInstance.SRAPIVersion</a></div><div class="ttdeci">const string SRAPIVersion</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00046">Interop.cs:46</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aa2d4ae32c582b1d03b22402dab486e80"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aa2d4ae32c582b1d03b22402dab486e80">TGServerService.ServerInstance.HandleCommand</a></div><div class="ttdeci">void HandleCommand(string cmd)</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00085">Interop.cs:85</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aac9358eb96d27250fb77c78695e90128"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aac9358eb96d27250fb77c78695e90128">TGServerService.ServerInstance.watchdogLock</a></div><div class="ttdeci">object watchdogLock</div><div class="ttdoc">Used for multithreading safety </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00053">DreamDaemon.cs:53</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9800fe98bc4ad092f716ffcaf466ec50"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9800fe98bc4ad092f716ffcaf466ec50">TGServerService.ServerInstance.SRKillProcess</a></div><div class="ttdeci">const string SRKillProcess</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00042">Interop.cs:42</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_html_a98d8f6303b894422167c743e15185398"><div class="ttname"><a href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">TGServerService.EventID</a></div><div class="ttdeci">EventID</div><div class="ttdoc">Various events and their IDs in no particular order. Found in the Windows event log. These key incremented by 100 and are guaranteed to never be reused in the future. In the windows event viewer, these IDs will be offset by the ServerInstance.LoggingID to distinguish events between instances. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults </div><div class="ttdef"><b>Definition:</b> <a href="_event_i_d_8cs_source.html#l00008">EventID.cs:8</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a6e6867184406c444e08d9d9c1516e91d"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a6e6867184406c444e08d9d9c1516e91d">TGServerService.ServerInstance.SRIRCBroadcast</a></div><div class="ttdeci">const string SRIRCBroadcast</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00043">Interop.cs:43</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a84e536f3c962184942e7a5b01bc9ffad"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a84e536f3c962184942e7a5b01bc9ffad">TGServerService.ServerInstance.CheckAPIVersionConstraints</a></div><div class="ttdeci">bool CheckAPIVersionConstraints()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00174">Interop.cs:174</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a4e943244934b9768a821aa6ec722ac18"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a4e943244934b9768a821aa6ec722ac18">TGServerService.ServerInstance.currentPort</a></div><div class="ttdeci">ushort currentPort</div><div class="ttdoc">Current port DreamDaemon is running on </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00069">DreamDaemon.cs:69</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a31cb383e125fcb094259185112c3ea40"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a31cb383e125fcb094259185112c3ea40">TGServerService.ServerInstance.InteropMessage</a></div><div class="ttdeci">bool InteropMessage(string command)</div><div class="ttdoc">Called from /world/ExportService(command)  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00255">Interop.cs:255</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a2e13a465e1c065c58defc0d891822ee5"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a2e13a465e1c065c58defc0d891822ee5">TGServerService.ServerInstance.Version</a></div><div class="ttdeci">string Version()</div><div class="ttdoc">Retrieve&amp;#39;s the service&amp;#39;s version  </div><div class="ttdef"><b>Definition:</b> <a href="_server_instance_8cs_source.html#l00108">ServerInstance.cs:108</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ac30b2fd293b49f890f3a1e32646c6d64"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ac30b2fd293b49f890f3a1e32646c6d64">TGServerService.ServerInstance.currentStatus</a></div><div class="ttdeci">DreamDaemonStatus currentStatus</div><div class="ttdoc">The DreamDaemonStatus of Proc </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00061">DreamDaemon.cs:61</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a235f24c0d390a379749a478dc5993550"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a235f24c0d390a379749a478dc5993550">TGServerService.ServerInstance.GenCommsKey</a></div><div class="ttdeci">void GenCommsKey()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00240">Interop.cs:240</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ac66b59d813dcc51bf26bd90f3b812e8d"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ac66b59d813dcc51bf26bd90f3b812e8d">TGServerService.ServerInstance.WriteCurrentDDLog</a></div><div class="ttdeci">void WriteCurrentDDLog(string message)</div><div class="ttdoc">Write a message  to the CurrentDDLog. A timestamp will be prepended to it </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00291">DreamDaemon.cs:291</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aaff75bb9874194c398f76a60c494bbdf"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aaff75bb9874194c398f76a60c494bbdf">TGServerService.ServerInstance.UpdateStaged</a></div><div class="ttdeci">bool UpdateStaged</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00047">Compiler.cs:47</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_af07a5ca7e8aeb5612b5333d94275e762"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#af07a5ca7e8aeb5612b5333d94275e762">TGServerService.ServerInstance.ServerChatCommands</a></div><div class="ttdeci">List&lt; Command &gt; ServerChatCommands</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00065">Interop.cs:65</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a3d33a80602850bbfcbc85ea2e1b4e42d"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a3d33a80602850bbfcbc85ea2e1b4e42d">TGServerService.ServerInstance.CCPRequiredParameters</a></div><div class="ttdeci">const string CCPRequiredParameters</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00050">Interop.cs:50</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aa56e6ffd2d00621ac72048ff36dbbe89"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aa56e6ffd2d00621ac72048ff36dbbe89">TGServerService.ServerInstance.SCAPICompat</a></div><div class="ttdeci">const string SCAPICompat</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00034">Interop.cs:34</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ad4283de03ea6d7f96473c41aa91e5741"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ad4283de03ea6d7f96473c41aa91e5741">TGServerService.ServerInstance.PlayerCount</a></div><div class="ttdeci">int PlayerCount()</div><div class="ttdoc">Returns the number of connected players. Requires game to use API version &gt;= 3.1.0.1 </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00161">Interop.cs:161</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a66f4c90ad2f16211acff4bffd38b63c7"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a66f4c90ad2f16211acff4bffd38b63c7">TGServerService.ServerInstance.SCHardReboot</a></div><div class="ttdeci">const string SCHardReboot</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00030">Interop.cs:30</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aeddee6363c31797b1e8a8d9cbc652fad"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aeddee6363c31797b1e8a8d9cbc652fad">TGServerService.ServerInstance.SRWorldReboot</a></div><div class="ttdeci">const string SRWorldReboot</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00045">Interop.cs:45</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aaad9762dd332e48b47c18e07dbe6bdbb"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aaad9762dd332e48b47c18e07dbe6bdbb">TGServerService.ServerInstance.SRetSuccess</a></div><div class="ttdeci">const string SRetSuccess</div><div class="ttdoc">String returned when a command completes successfully with no output </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00040">Interop.cs:40</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aac3bf932aa9e0ab3d2d972a8228f8309"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aac3bf932aa9e0ab3d2d972a8228f8309">TGServerService.ServerInstance.SPInstanceName</a></div><div class="ttdeci">const string SPInstanceName</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00027">Interop.cs:27</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a03e7f3ef4060c38aabf7322f61ecdad2"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a03e7f3ef4060c38aabf7322f61ecdad2">TGServerService.ServerInstance.DreamDaemonBridgeNamespace</a></div><div class="ttdeci">const string DreamDaemonBridgeNamespace</div><div class="ttdoc">The namespace that contains the ITGInterop bridge class. Used for reflection </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00059">Interop.cs:59</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a3e3edae60a9304c55a48e8bd50fa0bcf"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a3e3edae60a9304c55a48e8bd50fa0bcf">TGServerService.ServerInstance.SRIRCAdminChannelMessage</a></div><div class="ttdeci">const string SRIRCAdminChannelMessage</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00044">Interop.cs:44</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aba8a60fc349ded697f44a0e46e184784"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aba8a60fc349ded697f44a0e46e184784">TGServerService.ServerInstance.SCListCustomCommands</a></div><div class="ttdeci">const string SCListCustomCommands</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00033">Interop.cs:33</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a5bc2c5cf72086f7be5ab0360a8b97105"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a5bc2c5cf72086f7be5ab0360a8b97105">TGServerService.ServerInstance.serviceCommsKey</a></div><div class="ttdeci">string serviceCommsKey</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00021">Interop.cs:21</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_1_1_chat_commands_html"><div class="ttname"><a href="namespace_t_g_server_service_1_1_chat_commands.html">TGServerService.ChatCommands</a></div><div class="ttdef"><b>Definition:</b> <a href="_byond_command_8cs_source.html#l00004">ByondCommand.cs:4</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_chat_commands_1_1_server_chat_command_html"><div class="ttname"><a href="class_t_g_server_service_1_1_chat_commands_1_1_server_chat_command.html">TGServerService.ChatCommands.ServerChatCommand</a></div><div class="ttdoc">ChatCommands generated by DreamDaemon via the API </div><div class="ttdef"><b>Definition:</b> <a href="_server_chat_command_8cs_source.html#l00009">ServerChatCommand.cs:9</a></div></div>
<div class="ttc" id="_t_g_command_line_2_program_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_t_g_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">﻿using System</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_command_line_2_program_8cs_source.html#l00001">Program.cs:1</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a33c09fd7ed6d0907549e1cc08ad74562"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a33c09fd7ed6d0907549e1cc08ad74562">TGServerService.ServerInstance.WriteInfo</a></div><div class="ttdeci">void WriteInfo(string message, EventID id)</div><div class="ttdoc">Writes information to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_server_instance_8cs_source.html#l00063">ServerInstance.cs:63</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html"><div class="ttname"><a href="namespace_t_g_service_interface.html">TGServiceInterface</a></div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00006">ChatSetupInfo.cs:6</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a53163f831dc935310ef155d7b1f48aac"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a53163f831dc935310ef155d7b1f48aac">TGServerService.ServerInstance.BridgeDLLName</a></div><div class="ttdeci">const string BridgeDLLName</div><div class="ttdoc">The file name of the .dll that contains the ITGInterop bridge class </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00055">Interop.cs:55</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a43598a044d75089e4c3a0b433bca455b"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a43598a044d75089e4c3a0b433bca455b">TGServerService.ServerInstance.CompilerLock</a></div><div class="ttdeci">object CompilerLock</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00038">Compiler.cs:38</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a86ec90e265d2179399e7e260d8b99b94"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a86ec90e265d2179399e7e260d8b99b94">TGServerService.ServerInstance.CommsKeyLen</a></div><div class="ttdeci">const int CommsKeyLen</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00020">Interop.cs:20</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a8bdb55d2113035b09f1697072e14c873"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a8bdb55d2113035b09f1697072e14c873">TGServerService.ServerInstance.KillMe</a></div><div class="ttdeci">void KillMe()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00249">DreamDaemon.cs:249</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ae6ea9140e5cf33703628ac25700bc556"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556">TGServerService.ServerInstance.SendMessage</a></div><div class="ttdeci">void SendMessage(string msg, MessageType mt)</div><div class="ttdoc">Broadcast a message to appropriate channels based on the message type </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_chat_8cs_source.html#l00226">Chat.cs:226</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a070d3f5a7292c22e7cd0a807a8f73e4a"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a070d3f5a7292c22e7cd0a807a8f73e4a">TGServerService.ServerInstance.GameAPIVersion</a></div><div class="ttdeci">Version GameAPIVersion</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00025">Interop.cs:25</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_acb628731687d30da37761dcae1389893"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#acb628731687d30da37761dcae1389893">TGServerService.ServerInstance.CCPAdminOnly</a></div><div class="ttdeci">const string CCPAdminOnly</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00049">Interop.cs:49</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a8875aeb516888e8ed1007c14302076a1"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a8875aeb516888e8ed1007c14302076a1">TGServerService.ServerInstance.topicLock</a></div><div class="ttdeci">object topicLock</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00019">Interop.cs:19</a></div></div>
<div class="ttc" id="interface_t_g_service_interface_1_1_components_1_1_i_t_g_interop_html"><div class="ttname"><a href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_interop.html">TGServiceInterface.Components.ITGInterop</a></div><div class="ttdoc">Used by DreamDaemon to access the interop API with call()(). Restrictions are in place so that only a...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_service_interface_2_components_2_interop_8cs_source.html#l00009">Interop.cs:9</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a9f6e141cd76aa497dcf72f14c1219017"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a9f6e141cd76aa497dcf72f14c1219017">TGServerService.ServerInstance.WriteWarning</a></div><div class="ttdeci">void WriteWarning(string message, EventID id)</div><div class="ttdoc">Writes a warning to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_server_instance_8cs_source.html#l00083">ServerInstance.cs:83</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aaa392248d5913143b6537352190e75e6"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aaa392248d5913143b6537352190e75e6">TGServerService.ServerInstance.SendCommand</a></div><div class="ttdeci">string SendCommand(string cmd)</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00151">Interop.cs:151</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_ad13b3094596c77baca6116842d373760"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#ad13b3094596c77baca6116842d373760">TGServerService.ServerInstance.SendTopic</a></div><div class="ttdeci">string SendTopic(string topicdata, ushort port)</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00182">Interop.cs:182</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a860ffd00b1286a975841923fc97b96dc"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a860ffd00b1286a975841923fc97b96dc">TGServerService.ServerInstance.SCPlayerCount</a></div><div class="ttdeci">const string SCPlayerCount</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00035">Interop.cs:35</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a178ed6d4540e6d79c2d6a3df12640c4e"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a178ed6d4540e6d79c2d6a3df12640c4e">TGServerService.ServerInstance.AllowedMajorAPIVersion</a></div><div class="ttdeci">const int AllowedMajorAPIVersion</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00024">Interop.cs:24</a></div></div>
<div class="ttc" id="namespace_t_g_server_service_html"><div class="ttname"><a href="namespace_t_g_server_service.html">TGServerService</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a0d937d6309ff1105105779007109e6ce"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a0d937d6309ff1105105779007109e6ce">TGServerService.ServerInstance.CCPHelpText</a></div><div class="ttdeci">const string CCPHelpText</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00048">Interop.cs:48</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a14ef61af60718ccb273ad10c9639d2aa"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a14ef61af60718ccb273ad10c9639d2aa">TGServerService.ServerInstance.SCWorldAnnounce</a></div><div class="ttdeci">const string SCWorldAnnounce</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00032">Interop.cs:32</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aed41e4ebea7a5a0825e7b96f78c1331b"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aed41e4ebea7a5a0825e7b96f78c1331b">TGServerService.ServerInstance.DreamDaemonBridgeType</a></div><div class="ttdeci">const string DreamDaemonBridgeType</div><div class="ttdoc">The ITGInterop bridge class. Used for reflection </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00063">Interop.cs:63</a></div></div>
<div class="ttc" id="namespace_t_g_service_interface_html_a8d0a8727304bcbf3c0b9967701e533e9"><div class="ttname"><a href="namespace_t_g_service_interface.html#a8d0a8727304bcbf3c0b9967701e533e9">TGServiceInterface.DreamDaemonStatus</a></div><div class="ttdeci">DreamDaemonStatus</div><div class="ttdoc">The status of the DD instance </div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00140">Enumerations.cs:140</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a3a991f102faacdca2faec4a3fd92d9a9"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a3a991f102faacdca2faec4a3fd92d9a9">TGServerService.ServerInstance.LoadServerChatCommands</a></div><div class="ttdeci">void LoadServerChatCommands()</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00067">Interop.cs:67</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_aff49184e8ceaf6099708b568f09fc4fa"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#aff49184e8ceaf6099708b568f09fc4fa">TGServerService.ServerInstance.ChatConnectivityCheck</a></div><div class="ttdeci">void ChatConnectivityCheck()</div><div class="ttdoc">Reconnect servers that are enabled and disconnected. Checked every time DreamDaemon reboots ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_chat_8cs_source.html#l00205">Chat.cs:205</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_server_instance_html_a5d2da9246c06fca12ffb4cb7a6aef5d8"><div class="ttname"><a href="class_t_g_server_service_1_1_server_instance.html#a5d2da9246c06fca12ffb4cb7a6aef5d8">TGServerService.ServerInstance.SCGracefulShutdown</a></div><div class="ttdeci">const string SCGracefulShutdown</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00031">Interop.cs:31</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
