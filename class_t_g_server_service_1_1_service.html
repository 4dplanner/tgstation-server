<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tgstation-server: TGServerService.Service Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tgstation-server
   &#160;<span id="projectnumber">3.1.6.0</span>
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_t_g_server_service.html">TGServerService</a></li><li class="navelem"><a class="el" href="class_t_g_server_service_1_1_service.html">Service</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_t_g_server_service_1_1_service-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TGServerService.Service Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The windows service the application runs as  
 <a href="class_t_g_server_service_1_1_service.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for TGServerService.Service:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service__inherit__graph.png" border="0" usemap="#_t_g_server_service_8_service_inherit__map" alt="Inheritance graph"/></div>
<map name="_t_g_server_service_8_service_inherit__map" id="_t_g_server_service_8_service_inherit__map">
<area shape="rect" id="node2" href="class_service_base.html" title="ServiceBase" alt="" coords="39,5,134,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for TGServerService.Service:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service__coll__graph.png" border="0" usemap="#_t_g_server_service_8_service_coll__map" alt="Collaboration graph"/></div>
<map name="_t_g_server_service_8_service_coll__map" id="_t_g_server_service_8_service_coll__map">
<area shape="rect" id="node2" href="class_service_base.html" title="ServiceBase" alt="" coords="5,5,100,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a500b9c8dc623291779fbe0d61a073600"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a500b9c8dc623291779fbe0d61a073600">Service</a> ()</td></tr>
<tr class="memdesc:a500b9c8dc623291779fbe0d61a073600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct and run a <a class="el" href="class_t_g_server_service_1_1_service.html" title="The windows service the application runs as ">Service</a>. Can only execute in the context of the Windows service manager  <a href="#a500b9c8dc623291779fbe0d61a073600">More...</a><br /></td></tr>
<tr class="separator:a500b9c8dc623291779fbe0d61a073600"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac3397831deffcbd077a20f4ceb86f7c7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#ac3397831deffcbd077a20f4ceb86f7c7">CancelImpersonation</a> ()</td></tr>
<tr class="memdesc:ac3397831deffcbd077a20f4ceb86f7c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels WCF's user impersonation to allow clean access to writing log files  <a href="#ac3397831deffcbd077a20f4ceb86f7c7">More...</a><br /></td></tr>
<tr class="separator:ac3397831deffcbd077a20f4ceb86f7c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac90d464e7982312e0a43f1d710bd83a9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#ac90d464e7982312e0a43f1d710bd83a9">WriteInfo</a> (string message, <a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a> id)</td></tr>
<tr class="memdesc:ac90d464e7982312e0a43f1d710bd83a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes information to Windows the event log  <a href="#ac90d464e7982312e0a43f1d710bd83a9">More...</a><br /></td></tr>
<tr class="separator:ac90d464e7982312e0a43f1d710bd83a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a103b806b056a42886318a9f0422a865c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a103b806b056a42886318a9f0422a865c">WriteError</a> (string message, <a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a> id)</td></tr>
<tr class="memdesc:a103b806b056a42886318a9f0422a865c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes an error to the Windows event log  <a href="#a103b806b056a42886318a9f0422a865c">More...</a><br /></td></tr>
<tr class="separator:a103b806b056a42886318a9f0422a865c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3c4dfb35fce33f3462633036bc5af14"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#ae3c4dfb35fce33f3462633036bc5af14">WriteWarning</a> (string message, <a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a> id)</td></tr>
<tr class="memdesc:ae3c4dfb35fce33f3462633036bc5af14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a warning to the Windows event log  <a href="#ae3c4dfb35fce33f3462633036bc5af14">More...</a><br /></td></tr>
<tr class="separator:ae3c4dfb35fce33f3462633036bc5af14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f6ad886bff03e90360d6ea8fc0c94ad"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a5f6ad886bff03e90360d6ea8fc0c94ad">WriteAccess</a> (string username, bool authSuccess)</td></tr>
<tr class="memdesc:a5f6ad886bff03e90360d6ea8fc0c94ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes an access event to the Windows event log  <a href="#a5f6ad886bff03e90360d6ea8fc0c94ad">More...</a><br /></td></tr>
<tr class="separator:a5f6ad886bff03e90360d6ea8fc0c94ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a525cf1bdbe2b21a7bcb7775be30ce656"><td class="memItemLeft" align="right" valign="top">static readonly string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a525cf1bdbe2b21a7bcb7775be30ce656">Version</a> = &quot;/tg/station 13 Server <a class="el" href="class_t_g_server_service_1_1_service.html">Service</a> v&quot; + FileVersionInfo.GetVersionInfo(System.Reflection.Assembly.GetExecutingAssembly().Location).FileVersion</td></tr>
<tr class="memdesc:a525cf1bdbe2b21a7bcb7775be30ce656"><td class="mdescLeft">&#160;</td><td class="mdescRight">The service version string based on the FileVersionInfo  <a href="#a525cf1bdbe2b21a7bcb7775be30ce656">More...</a><br /></td></tr>
<tr class="separator:a525cf1bdbe2b21a7bcb7775be30ce656"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a4bb8fb7f15c6f001175ce52d70ef903e"><td class="memItemLeft" align="right" valign="top">override void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a4bb8fb7f15c6f001175ce52d70ef903e">OnStart</a> (string[] args)</td></tr>
<tr class="memdesc:a4bb8fb7f15c6f001175ce52d70ef903e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the Windows service manager. Initializes and starts the <a class="el" href="class_t_g_server_service_1_1_server_instance.html" title="The class which holds all interface components. There are no safeguards for call race conditions so t...">ServerInstance</a>  <a href="#a4bb8fb7f15c6f001175ce52d70ef903e">More...</a><br /></td></tr>
<tr class="separator:a4bb8fb7f15c6f001175ce52d70ef903e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dbfb4436b03982b6d7e466fde1763d7"><td class="memItemLeft" align="right" valign="top">override void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a2dbfb4436b03982b6d7e466fde1763d7">OnStop</a> ()</td></tr>
<tr class="memdesc:a2dbfb4436b03982b6d7e466fde1763d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutsdown the WCF <a class="el" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8" title="The WCF host that the Interface connects to ">host</a> and calls IDisposable.Dispose on it's <a class="el" href="class_t_g_server_service_1_1_server_instance.html" title="The class which holds all interface components. There are no safeguards for call race conditions so t...">ServerInstance</a>  <a href="#a2dbfb4436b03982b6d7e466fde1763d7">More...</a><br /></td></tr>
<tr class="separator:a2dbfb4436b03982b6d7e466fde1763d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a1f69ae79605fe8f17f3183ae15583d39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a1f69ae79605fe8f17f3183ae15583d39">MigrateSettings</a> (int oldVersion, int newVersion)</td></tr>
<tr class="memdesc:a1f69ae79605fe8f17f3183ae15583d39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Migrates the Properties.Settings file from an older version  <a href="#a1f69ae79605fe8f17f3183ae15583d39">More...</a><br /></td></tr>
<tr class="separator:a1f69ae79605fe8f17f3183ae15583d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c4c6dd3cb5dadda5608e02fcd1adb35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a2c4c6dd3cb5dadda5608e02fcd1adb35">AddEndpoint</a> (Type type)</td></tr>
<tr class="memdesc:a2c4c6dd3cb5dadda5608e02fcd1adb35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a WCF endpoint for a component <em>type</em>   <a href="#a2c4c6dd3cb5dadda5608e02fcd1adb35">More...</a><br /></td></tr>
<tr class="separator:a2c4c6dd3cb5dadda5608e02fcd1adb35"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a41aed3f3d48cd6d1c8b2d64acb08e8b8"><td class="memItemLeft" align="right" valign="top">ServiceHost&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">host</a></td></tr>
<tr class="memdesc:a41aed3f3d48cd6d1c8b2d64acb08e8b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The WCF host that the Interface connects to  <a href="#a41aed3f3d48cd6d1c8b2d64acb08e8b8">More...</a><br /></td></tr>
<tr class="separator:a41aed3f3d48cd6d1c8b2d64acb08e8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ac2057d36e9866b9fc8483ba5e56eca12"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_t_g_server_service_1_1_service.html">Service</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">ActiveService</a></td></tr>
<tr class="memdesc:ac2057d36e9866b9fc8483ba5e56eca12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton instance  <a href="#ac2057d36e9866b9fc8483ba5e56eca12">More...</a><br /></td></tr>
<tr class="separator:ac2057d36e9866b9fc8483ba5e56eca12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The windows service the application runs as </p>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00015">15</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a500b9c8dc623291779fbe0d61a073600"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TGServerService.Service.Service </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct and run a <a class="el" href="class_t_g_server_service_1_1_service.html" title="The windows service the application runs as ">Service</a>. Can only execute in the context of the Windows service manager </p>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00083">83</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>References <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00115">TGServerService.Service.MigrateSettings()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                <span class="keywordflow">if</span> (Properties.Settings.Default.UpgradeRequired)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                    var newVersion = Properties.Settings.Default.SettingsVersion;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                    Properties.Settings.Default.Upgrade();</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                    var oldVersion = Properties.Settings.Default.SettingsVersion;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                    Properties.Settings.Default.SettingsVersion = newVersion;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    <a class="code" href="class_t_g_server_service_1_1_service.html#a1f69ae79605fe8f17f3183ae15583d39">MigrateSettings</a>(oldVersion, newVersion);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    Properties.Settings.Default.UpgradeRequired = <span class="keyword">false</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    Properties.Settings.Default.Save();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                ServiceName = <span class="stringliteral">&quot;TG Station Server&quot;</span>;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">ActiveService</a> = <span class="keyword">this</span>;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                Run(<span class="keyword">this</span>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            }</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keywordflow">finally</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                Properties.Settings.Default.Save();</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        }</div><div class="ttc" id="class_t_g_server_service_1_1_service_html_ac2057d36e9866b9fc8483ba5e56eca12"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">TGServerService.Service.ActiveService</a></div><div class="ttdeci">static Service ActiveService</div><div class="ttdoc">Singleton instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00025">Service.cs:25</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_a1f69ae79605fe8f17f3183ae15583d39"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#a1f69ae79605fe8f17f3183ae15583d39">TGServerService.Service.MigrateSettings</a></div><div class="ttdeci">void MigrateSettings(int oldVersion, int newVersion)</div><div class="ttdoc">Migrates the Properties.Settings file from an older version </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00115">Service.cs:115</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_a500b9c8dc623291779fbe0d61a073600_cgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_a500b9c8dc623291779fbe0d61a073600_cgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_a500b9c8dc623291779fbe0d61a073600_cgraph" id="class_t_g_server_service_1_1_service_a500b9c8dc623291779fbe0d61a073600_cgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_service.html#a1f69ae79605fe8f17f3183ae15583d39" title="Migrates the Properties.Settings file from an older version " alt="" coords="220,5,387,47"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2c4c6dd3cb5dadda5608e02fcd1adb35"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TGServerService.Service.AddEndpoint </td>
          <td>(</td>
          <td class="paramtype">Type&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a WCF endpoint for a component <em>type</em>  </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>The Type of the component </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00179">179</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>References <a class="el" href="_interface_8cs_source.html#l00038">TGServiceInterface.Interface.MasterInterfaceName</a>, <a class="el" href="_interface_8cs_source.html#l00027">TGServiceInterface.Interface.TransferLimitLocal</a>, and <a class="el" href="_interface_8cs_source.html#l00032">TGServiceInterface.Interface.TransferLimitRemote</a>.</p>

<p>Referenced by <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00125">TGServerService.Service.OnStart()</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        {</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            var bindingName = <a class="code" href="class_t_g_service_interface_1_1_interface.html">Interface</a>.<a class="code" href="class_t_g_service_interface_1_1_interface.html#a9357161b2c8d891dbf69a0e7018ddf77">MasterInterfaceName</a> + <span class="stringliteral">&quot;/&quot;</span> + type.Name;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">host</a>.AddServiceEndpoint(type, <span class="keyword">new</span> NetNamedPipeBinding() { SendTimeout = <span class="keyword">new</span> TimeSpan(0, 0, 30), MaxReceivedMessageSize = <a class="code" href="class_t_g_service_interface_1_1_interface.html">Interface</a>.<a class="code" href="class_t_g_service_interface_1_1_interface.html#aa5ccca53bb7e2bd6fd609ee68099bbd2">TransferLimitLocal</a> }, bindingName);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            var httpsBinding = <span class="keyword">new</span> WSHttpBinding()</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                SendTimeout = <span class="keyword">new</span> TimeSpan(0, 0, 40),</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                MaxReceivedMessageSize = <a class="code" href="class_t_g_service_interface_1_1_interface.html">Interface</a>.<a class="code" href="class_t_g_service_interface_1_1_interface.html#a00d88d167689139612f0e7c4444eb35d">TransferLimitRemote</a></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            };</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            var requireAuth = type.Name != typeof(<a class="code" href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_connectivity.html">ITGConnectivity</a>).Name;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            httpsBinding.Security.Transport.ClientCredentialType = HttpClientCredentialType.None;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            httpsBinding.Security.Mode = requireAuth ? SecurityMode.TransportWithMessageCredential : SecurityMode.Transport;    <span class="comment">//do not require auth for a connectivity check</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            httpsBinding.Security.Message.ClientCredentialType = requireAuth ? MessageCredentialType.UserName : MessageCredentialType.None;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">host</a>.AddServiceEndpoint(type, httpsBinding, bindingName);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div><div class="ttc" id="interface_t_g_service_interface_1_1_components_1_1_i_t_g_connectivity_html"><div class="ttname"><a href="interface_t_g_service_interface_1_1_components_1_1_i_t_g_connectivity.html">TGServiceInterface.Components.ITGConnectivity</a></div><div class="ttdoc">Used for testing connections to the service without authentication </div><div class="ttdef"><b>Definition:</b> <a href="_connectivity_8cs_source.html#l00009">Connectivity.cs:9</a></div></div>
<div class="ttc" id="class_t_g_service_interface_1_1_interface_html_aa5ccca53bb7e2bd6fd609ee68099bbd2"><div class="ttname"><a href="class_t_g_service_interface_1_1_interface.html#aa5ccca53bb7e2bd6fd609ee68099bbd2">TGServiceInterface.Interface.TransferLimitLocal</a></div><div class="ttdeci">const long TransferLimitLocal</div><div class="ttdoc">The maximum message size to and from a local server </div><div class="ttdef"><b>Definition:</b> <a href="_interface_8cs_source.html#l00027">Interface.cs:27</a></div></div>
<div class="ttc" id="class_t_g_service_interface_1_1_interface_html_a00d88d167689139612f0e7c4444eb35d"><div class="ttname"><a href="class_t_g_service_interface_1_1_interface.html#a00d88d167689139612f0e7c4444eb35d">TGServiceInterface.Interface.TransferLimitRemote</a></div><div class="ttdeci">const long TransferLimitRemote</div><div class="ttdoc">The maximum message size to and from a remote server </div><div class="ttdef"><b>Definition:</b> <a href="_interface_8cs_source.html#l00032">Interface.cs:32</a></div></div>
<div class="ttc" id="class_t_g_service_interface_1_1_interface_html_a9357161b2c8d891dbf69a0e7018ddf77"><div class="ttname"><a href="class_t_g_service_interface_1_1_interface.html#a9357161b2c8d891dbf69a0e7018ddf77">TGServiceInterface.Interface.MasterInterfaceName</a></div><div class="ttdeci">const string MasterInterfaceName</div><div class="ttdoc">Base name of the communication pipe they are formatted as MasterPipeName/ComponentName ...</div><div class="ttdef"><b>Definition:</b> <a href="_interface_8cs_source.html#l00038">Interface.cs:38</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_a41aed3f3d48cd6d1c8b2d64acb08e8b8"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">TGServerService.Service.host</a></div><div class="ttdeci">ServiceHost host</div><div class="ttdoc">The WCF host that the Interface connects to </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00076">Service.cs:76</a></div></div>
<div class="ttc" id="class_t_g_service_interface_1_1_interface_html"><div class="ttname"><a href="class_t_g_service_interface_1_1_interface.html">TGServiceInterface.Interface</a></div><div class="ttdoc">Main inteface class for the service </div><div class="ttdef"><b>Definition:</b> <a href="_interface_8cs_source.html#l00017">Interface.cs:17</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_a2c4c6dd3cb5dadda5608e02fcd1adb35_icgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_a2c4c6dd3cb5dadda5608e02fcd1adb35_icgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_a2c4c6dd3cb5dadda5608e02fcd1adb35_icgraph" id="class_t_g_server_service_1_1_service_a2c4c6dd3cb5dadda5608e02fcd1adb35_icgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_service.html#a4bb8fb7f15c6f001175ce52d70ef903e" title="Called by the Windows service manager. Initializes and starts the ServerInstance " alt="" coords="220,5,387,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac3397831deffcbd077a20f4ceb86f7c7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TGServerService.Service.CancelImpersonation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cancels WCF's user impersonation to allow clean access to writing log files </p>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00030">30</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>Referenced by <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00161">TGServerService.ServerInstance.DeleteFile()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00024">TGServerService.ServerInstance.ReadText()</a>, and <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00109">TGServerService.ServerInstance.WriteText()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        {</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;            WindowsIdentity.Impersonate(IntPtr.Zero);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        }</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_ac3397831deffcbd077a20f4ceb86f7c7_icgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_ac3397831deffcbd077a20f4ceb86f7c7_icgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_ac3397831deffcbd077a20f4ceb86f7c7_icgraph" id="class_t_g_server_service_1_1_service_ac3397831deffcbd077a20f4ceb86f7c7_icgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_server_instance.html#acf09f63e7c88913016493dc9b487f902" title="Deletes the target static file &#160;" alt="" coords="220,5,431,47"/>
<area shape="rect" id="node3" href="class_t_g_server_service_1_1_server_instance.html#a5b2fcd99212aba5406674cdf3175b9a1" title="Read from a static file &#160;" alt="" coords="220,71,431,112"/>
<area shape="rect" id="node4" href="class_t_g_server_service_1_1_server_instance.html#abdf26641e717823f8958ac46db3c0cc8" title="Write to a static file &#160;" alt="" coords="220,136,431,177"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1f69ae79605fe8f17f3183ae15583d39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void TGServerService.Service.MigrateSettings </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>oldVersion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>newVersion</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Migrates the Properties.Settings file from an older version </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldVersion</td><td>The previous version</td></tr>
    <tr><td class="paramname">newVersion</td><td>The new version</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00115">115</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>Referenced by <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00083">TGServerService.Service.Service()</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">if</span> (oldVersion == newVersion &amp;&amp; newVersion == 0)    <span class="comment">//chat refactor</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                Properties.Settings.Default.ChatProviderData = <span class="stringliteral">&quot;NEEDS INITIALIZING&quot;</span>;    <span class="comment">//reset chat settings to be safe</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div></div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_a1f69ae79605fe8f17f3183ae15583d39_icgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_a1f69ae79605fe8f17f3183ae15583d39_icgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_a1f69ae79605fe8f17f3183ae15583d39_icgraph" id="class_t_g_server_service_1_1_service_a1f69ae79605fe8f17f3183ae15583d39_icgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_service.html#a500b9c8dc623291779fbe0d61a073600" title="Construct and run a Service. Can only execute in the context of the Windows service manager ..." alt="" coords="220,5,387,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4bb8fb7f15c6f001175ce52d70ef903e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override void TGServerService.Service.OnStart </td>
          <td>(</td>
          <td class="paramtype">string[]&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by the Windows service manager. Initializes and starts the <a class="el" href="class_t_g_server_service_1_1_server_instance.html" title="The class which holds all interface components. There are no safeguards for call race conditions so t...">ServerInstance</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>Command line arguments for the <a class="el" href="class_t_g_server_service_1_1_service.html" title="The windows service the application runs as ">Service</a></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00125">125</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>References <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00179">TGServerService.Service.AddEndpoint()</a>, and <a class="el" href="_interface_8cs_source.html#l00022">TGServiceInterface.Interface.ValidInterfaces</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            var Config = Properties.Settings.Default;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">if</span> (!Directory.Exists(Config.ServerDirectory))</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                EventLog.WriteEntry(<span class="stringliteral">&quot;Creating server directory: &quot;</span> + Config.ServerDirectory);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                Directory.CreateDirectory(Config.ServerDirectory);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            Environment.CurrentDirectory = Config.ServerDirectory;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            var instance = <span class="keyword">new</span> ServerInstance();</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">for</span> (var I = 0; I &lt; args.Length - 1; ++I)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                <span class="keywordflow">if</span> (args[I].ToLower() == <span class="stringliteral">&quot;-port&quot;</span>)</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                {</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    <span class="keywordflow">try</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        var res = Convert.ToUInt16(args[I + 1]);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        <span class="keywordflow">if</span> (res == 0)</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Cannot bind to port 0&quot;</span>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                        Config.RemoteAccessPort = res;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                    }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    <span class="keywordflow">catch</span>(Exception e)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Invalid argument for \&quot;-port\&quot;&quot;</span>, e);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    Config.Save();</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">host</a> = <span class="keyword">new</span> ServiceHost(instance, <span class="keyword">new</span> Uri[] { <span class="keyword">new</span> Uri(<span class="stringliteral">&quot;net.pipe://localhost&quot;</span>), <span class="keyword">new</span> Uri(String.Format(<span class="stringliteral">&quot;https://localhost:{0}&quot;</span>, Config.RemoteAccessPort)) })</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                CloseTimeout = <span class="keyword">new</span> TimeSpan(0, 0, 5)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            };</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">foreach</span> (var I <span class="keywordflow">in</span> <a class="code" href="class_t_g_service_interface_1_1_interface.html">Interface</a>.<a class="code" href="class_t_g_service_interface_1_1_interface.html#a177251e0cec2b05f762f91a560766e95">ValidInterfaces</a>)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_service.html#a2c4c6dd3cb5dadda5608e02fcd1adb35">AddEndpoint</a>(I);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            </div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">host</a>.Authorization.ServiceAuthorizationManager = instance;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">host</a>.Open();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">catch</span> (AddressAlreadyInUseException e)</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Can&#39;t start the service due to the configured remote access port being in use. To fix this change it by starting the service with the \&quot;-port &lt;port&gt;\&quot; argument.&quot;</span>, e);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div><div class="ttc" id="class_t_g_service_interface_1_1_interface_html_a177251e0cec2b05f762f91a560766e95"><div class="ttname"><a href="class_t_g_service_interface_1_1_interface.html#a177251e0cec2b05f762f91a560766e95">TGServiceInterface.Interface.ValidInterfaces</a></div><div class="ttdeci">static readonly IList&lt; Type &gt; ValidInterfaces</div><div class="ttdoc">List of s that can be used with GetComponent&lt;T&gt; and CreateChannel&lt;T&gt; </div><div class="ttdef"><b>Definition:</b> <a href="_interface_8cs_source.html#l00022">Interface.cs:22</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_a41aed3f3d48cd6d1c8b2d64acb08e8b8"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">TGServerService.Service.host</a></div><div class="ttdeci">ServiceHost host</div><div class="ttdoc">The WCF host that the Interface connects to </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00076">Service.cs:76</a></div></div>
<div class="ttc" id="class_t_g_service_interface_1_1_interface_html"><div class="ttname"><a href="class_t_g_service_interface_1_1_interface.html">TGServiceInterface.Interface</a></div><div class="ttdoc">Main inteface class for the service </div><div class="ttdef"><b>Definition:</b> <a href="_interface_8cs_source.html#l00017">Interface.cs:17</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_a2c4c6dd3cb5dadda5608e02fcd1adb35"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#a2c4c6dd3cb5dadda5608e02fcd1adb35">TGServerService.Service.AddEndpoint</a></div><div class="ttdeci">void AddEndpoint(Type type)</div><div class="ttdoc">Adds a WCF endpoint for a component type  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00179">Service.cs:179</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_a4bb8fb7f15c6f001175ce52d70ef903e_cgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_a4bb8fb7f15c6f001175ce52d70ef903e_cgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_a4bb8fb7f15c6f001175ce52d70ef903e_cgraph" id="class_t_g_server_service_1_1_service_a4bb8fb7f15c6f001175ce52d70ef903e_cgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_service.html#a2c4c6dd3cb5dadda5608e02fcd1adb35" title="Adds a WCF endpoint for a component type &#160;" alt="" coords="220,5,387,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2dbfb4436b03982b6d7e466fde1763d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override void TGServerService.Service.OnStop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Shutsdown the WCF <a class="el" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8" title="The WCF host that the Interface connects to ">host</a> and calls IDisposable.Dispose on it's <a class="el" href="class_t_g_server_service_1_1_server_instance.html" title="The class which holds all interface components. There are no safeguards for call race conditions so t...">ServerInstance</a> </p>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00198">198</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>References <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00049">TGServerService.Service.WriteError()</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                var instance = (ServerInstance)<a class="code" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">host</a>.SingletonInstance;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">host</a>.Close();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                instance.Dispose();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="keywordflow">catch</span> (Exception e)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                <a class="code" href="class_t_g_server_service_1_1_service.html#a103b806b056a42886318a9f0422a865c">WriteError</a>(e.ToString(), <a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.ServiceShutdownFail);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        }</div><div class="ttc" id="namespace_t_g_server_service_html_a98d8f6303b894422167c743e15185398"><div class="ttname"><a href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">TGServerService.EventID</a></div><div class="ttdeci">EventID</div><div class="ttdoc">Various events and their IDs in no particular order. Found in the Windows event log. These incremented by 100 and are guaranteed to never be reused in the future. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults </div><div class="ttdef"><b>Definition:</b> <a href="_event_i_d_8cs_source.html#l00008">EventID.cs:8</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_a41aed3f3d48cd6d1c8b2d64acb08e8b8"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#a41aed3f3d48cd6d1c8b2d64acb08e8b8">TGServerService.Service.host</a></div><div class="ttdeci">ServiceHost host</div><div class="ttdoc">The WCF host that the Interface connects to </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00076">Service.cs:76</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_a103b806b056a42886318a9f0422a865c"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#a103b806b056a42886318a9f0422a865c">TGServerService.Service.WriteError</a></div><div class="ttdeci">static void WriteError(string message, EventID id)</div><div class="ttdoc">Writes an error to the Windows event log </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00049">Service.cs:49</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_a2dbfb4436b03982b6d7e466fde1763d7_cgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_a2dbfb4436b03982b6d7e466fde1763d7_cgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_a2dbfb4436b03982b6d7e466fde1763d7_cgraph" id="class_t_g_server_service_1_1_service_a2dbfb4436b03982b6d7e466fde1763d7_cgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_service.html#a103b806b056a42886318a9f0422a865c" title="Writes an error to the Windows event log " alt="" coords="220,5,387,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a5f6ad886bff03e90360d6ea8fc0c94ad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TGServerService.Service.WriteAccess </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>username</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>authSuccess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes an access event to the Windows event log </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">username</td><td>The (un)authenticated Windows user's name</td></tr>
    <tr><td class="paramname">authSuccess</td><td>if <em>username</em>  authenticated sucessfully,  otherwise</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00068">68</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>Referenced by <a class="el" href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00101">TGServerService.ServerInstance.CheckAccessCore()</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">ActiveService</a>.EventLog.WriteEntry(String.Format(<span class="stringliteral">&quot;Access from: {0}&quot;</span>, username), authSuccess ? EventLogEntryType.SuccessAudit : EventLogEntryType.FailureAudit, (int)<a class="code" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>.Authentication);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        }</div><div class="ttc" id="namespace_t_g_server_service_html_a98d8f6303b894422167c743e15185398"><div class="ttname"><a href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">TGServerService.EventID</a></div><div class="ttdeci">EventID</div><div class="ttdoc">Various events and their IDs in no particular order. Found in the Windows event log. These incremented by 100 and are guaranteed to never be reused in the future. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults </div><div class="ttdef"><b>Definition:</b> <a href="_event_i_d_8cs_source.html#l00008">EventID.cs:8</a></div></div>
<div class="ttc" id="class_t_g_server_service_1_1_service_html_ac2057d36e9866b9fc8483ba5e56eca12"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">TGServerService.Service.ActiveService</a></div><div class="ttdeci">static Service ActiveService</div><div class="ttdoc">Singleton instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00025">Service.cs:25</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_a5f6ad886bff03e90360d6ea8fc0c94ad_icgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_a5f6ad886bff03e90360d6ea8fc0c94ad_icgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_a5f6ad886bff03e90360d6ea8fc0c94ad_icgraph" id="class_t_g_server_service_1_1_service_a5f6ad886bff03e90360d6ea8fc0c94ad_icgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_server_instance.html#a7a5e21a235e202744184c8e25a6a5d86" title="Called by WCF whenever a component call is made. Checks to see that the supplied user account has acc..." alt="" coords="220,5,431,47"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a103b806b056a42886318a9f0422a865c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TGServerService.Service.WriteError </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes an error to the Windows event log </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The log message</td></tr>
    <tr><td class="paramname">id</td><td>The <a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398" title="Various events and their IDs in no particular order. Found in the Windows event log. These incremented by 100 and are guaranteed to never be reused in the future. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults ">EventID</a> of the message</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00049">49</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>Referenced by <a class="el" href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00312">TGServerService.ServerInstance.ApplyStagedUpdate()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00296">TGServerService.ServerInstance.CompileImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00756">TGServerService.ServerInstance.DeletePRList()</a>, <a class="el" href="_i_r_c_chat_provider_8cs_source.html#l00277">TGServerService.ChatProviders.IRCChatProvider.Disconnect()</a>, <a class="el" href="_discord_chat_provider_8cs_source.html#l00233">TGServerService.ChatProviders.DiscordChatProvider.DisconnectAndDispose()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_chat_8cs_source.html#l00025">TGServerService.ServerInstance.InitChat()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00097">TGServerService.ServerInstance.InitDreamDaemon()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00336">TGServerService.ServerInstance.InitialConfigureRepository()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00153">TGServerService.ServerInstance.InitializeImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00794">TGServerService.ServerInstance.MergePullRequest()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00157">TGServerService.ServerInstance.MoveServer()</a>, <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00198">TGServerService.Service.OnStop()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00524">TGServerService.ServerInstance.UpdateInterfaceDll()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00199">TGServerService.ServerInstance.UpdateToVersionImpl()</a>, and <a class="el" href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00303">TGServerService.ServerInstance.Watchdog()</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        {</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">ActiveService</a>.EventLog.WriteEntry(message, EventLogEntryType.Error, (<span class="keywordtype">int</span>)<span class="keywordtype">id</span>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        }</div><div class="ttc" id="class_t_g_server_service_1_1_service_html_ac2057d36e9866b9fc8483ba5e56eca12"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">TGServerService.Service.ActiveService</a></div><div class="ttdeci">static Service ActiveService</div><div class="ttdoc">Singleton instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00025">Service.cs:25</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_a103b806b056a42886318a9f0422a865c_icgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_a103b806b056a42886318a9f0422a865c_icgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_a103b806b056a42886318a9f0422a865c_icgraph" id="class_t_g_server_service_1_1_service_a103b806b056a42886318a9f0422a865c_icgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_server_instance.html#a28e22392a22a56807a3c3a6a3a366860" title="Attempts to move the staged update from StagingDirectory to ByondDirectory. Sets lastError on failure..." alt="" coords="230,77,441,119"/>
<area shape="rect" id="node4" href="class_t_g_server_service_1_1_server_instance.html#a8fa16abc1470f3a09b8c5da998ad03a9" title="Setup or reattach the watchdog, depending on Properties.Settings.ReattachToDD, and create the Diagnos..." alt="" coords="1016,228,1227,269"/>
<area shape="rect" id="node10" href="class_t_g_server_service_1_1_server_instance.html#a4a2dc7c3b649bf0e7f81362c851a2c8f" title="Downloads and unzips a BYOND revision. Calls ApplyStagedUpdate afterwards if the ServerInstance isn&#39;t..." alt="" coords="499,19,709,60"/>
<area shape="rect" id="node12" href="class_t_g_server_service_1_1_server_instance.html#a591be0739a0ebf1c70fa2d0615262324" title="TGServerService.ServerInstance.\lCompileImpl" alt="" coords="230,253,441,295"/>
<area shape="rect" id="node16" href="class_t_g_server_service_1_1_server_instance.html#aabf31525de01a260b7a83ce8ac928d62" title="TGServerService.ServerInstance.\lInitializeImpl" alt="" coords="499,136,709,177"/>
<area shape="rect" id="node18" href="class_t_g_server_service_1_1_server_instance.html#a04c0e665fa5086f6ebf6d5ffe288ca89" title="Deletes the ServerInstance&#39;s PRJobFile " alt="" coords="230,517,441,559"/>
<area shape="rect" id="node26" href="class_t_g_server_service_1_1_chat_providers_1_1_i_r_c_chat_provider.html#ae5372d562247d9c88a89504314a1b0e2" title="Disconnects the chat provider &#160;" alt="" coords="233,371,438,412"/>
<area shape="rect" id="node27" href="class_t_g_server_service_1_1_chat_providers_1_1_discord_chat_provider.html#aa179a694ed75414077fb2957fb025ca4" title="Shutsdown and disposes client " alt="" coords="220,437,451,493"/>
<area shape="rect" id="node28" href="class_t_g_server_service_1_1_server_instance.html#a61c197535442dd090e429de96abe5466" title="Set up the ChatProviders for the ServerInstance " alt="" coords="1016,844,1227,885"/>
<area shape="rect" id="node29" href="class_t_g_server_service_1_1_server_instance.html#a5ce4ab9dd00a38f8e434a54ef8978dde" title="Initial setup for the StaticDirs and CachedTGS3SettingsPath " alt="" coords="499,768,709,809"/>
<area shape="rect" id="node31" href="class_t_g_server_service_1_1_server_instance.html#ac69d8bdd66e3ba416de9412ca82a92ed" title="Merges the target pull request into the current branch if the remote is a github repository &#160;..." alt="" coords="230,648,441,689"/>
<area shape="rect" id="node32" href="class_t_g_server_service_1_1_server_instance.html#aa8a3c62ea83e029263e21654e184ab80" title="Moves the entire server installation, requires no operations to be running &#160;" alt="" coords="230,713,441,755"/>
<area shape="rect" id="node33" href="class_t_g_server_service_1_1_service.html#a2dbfb4436b03982b6d7e466fde1763d7" title="Shutsdown the WCF host and calls IDisposable.Dispose on it&#39;s ServerInstance " alt="" coords="252,779,419,820"/>
<area shape="rect" id="node34" href="class_t_g_server_service_1_1_server_instance.html#a4b4771257ed71f5145b495f85a0553da" title="Copies InterfaceDLLName from the program directory to the the ServerInstance directory ..." alt="" coords="230,583,441,624"/>
<area shape="rect" id="node36" href="class_t_g_server_service_1_1_server_instance.html#ab76e4c626e2b38e75781aaad0b7809a9" title="Threaded loop that keeps DreamDaemon from unintentionally stopping " alt="" coords="757,253,968,295"/>
<area shape="rect" id="node3" href="class_t_g_server_service_1_1_server_instance.html#a8f8c222dd4a2d21957b968b26eff08a3" title="Starts the server if it isn&#39;t running &#160;" alt="" coords="757,136,968,177"/>
<area shape="rect" id="node6" href="class_t_g_server_service_1_1_server_instance.html#ac58aa725d4b3a81cf979ab657a02cdb8" title="Immediately kills and restarts the server &#160;" alt="" coords="1016,136,1227,177"/>
<area shape="rect" id="node5" href="class_t_g_server_service_1_1_server_instance.html#a805c3433c1fd7347b862ba4a3b0ea5f8" title="Constructs and a ServerInstance " alt="" coords="1275,597,1485,639"/>
<area shape="rect" id="node7" href="class_t_g_server_service_1_1_server_instance.html#a8bdb55d2113035b09f1697072e14c873" title="TGServerService.ServerInstance.\lKillMe" alt="" coords="1275,136,1485,177"/>
<area shape="rect" id="node8" href="class_t_g_server_service_1_1_server_instance.html#aa2d4ae32c582b1d03b22402dab486e80" title="TGServerService.ServerInstance.\lHandleCommand" alt="" coords="1533,136,1744,177"/>
<area shape="rect" id="node9" href="class_t_g_server_service_1_1_server_instance.html#a31cb383e125fcb094259185112c3ea40" title="Called from /world/ExportService(command) &#160;" alt="" coords="1792,136,2003,177"/>
<area shape="rect" id="node11" href="class_t_g_server_service_1_1_server_instance.html#a6136aa0574aa874d5532cb528e764d78" title="updates the used byond version to that of version major .minor . The change won&#39;t take place until DD..." alt="" coords="757,5,968,47"/>
<area shape="rect" id="node13" href="class_t_g_server_service_1_1_server_instance.html#afdd737c980b2c078c2de10a57dc4ad40" title="Does all the necessary actions to take the revision currently in the repository and compile it to be ..." alt="" coords="499,319,709,360"/>
<area shape="rect" id="node14" href="class_t_g_server_service_1_1_server_instance.html#af0d1ea78a382258b4ddcf815cb23f7ba" title="Runs on the configured Properties.Settings.AutoUpdateInterval and tries to Update(bool) and Compile(b..." alt="" coords="757,527,968,568"/>
<area shape="rect" id="node15" href="class_t_g_server_service_1_1_server_instance.html#ac4444f5e9e540e4d8222da5d9ff42940" title="Initializes the repository " alt="" coords="1016,597,1227,639"/>
<area shape="rect" id="node17" href="class_t_g_server_service_1_1_server_instance.html#a427984d1cb5c60f217967795c9695998" title="Sets up the symlinks for hotswapping game code. This will reset everything in the Game folder..." alt="" coords="757,71,968,112"/>
<area shape="rect" id="node19" href="class_t_g_server_service_1_1_server_instance.html#a14f34e7f968afb1ad7f77d8813d5799b" title="Backups up the StaticDirs and deletes the current RepoPath if they exist. Clones the given branch of ..." alt="" coords="757,735,968,776"/>
<area shape="rect" id="node21" href="class_t_g_server_service_1_1_server_instance.html#a3b36d7847cac9b98816d757747c2b795" title="Create a commit based on a Config &#160;" alt="" coords="499,436,709,477"/>
<area shape="rect" id="node23" href="class_t_g_server_service_1_1_server_instance.html#ad2ab144910505686ff9529a708751f8f" title="Runs git reset –hard &#160;" alt="" coords="499,501,709,543"/>
<area shape="rect" id="node24" href="class_t_g_server_service_1_1_server_instance.html#aa1258b6c6ba7f13a930e4f1c892e5b2a" title="Fetches the origin and merges it into the current branch " alt="" coords="499,567,709,608"/>
<area shape="rect" id="node20" href="class_t_g_server_service_1_1_server_instance.html#a3a8f527d1b8aef7962a482d8e66b370e" title="Deletes whatever may be left over and clones the repo at remote &#160;and checks out branch ..." alt="" coords="1016,735,1227,776"/>
<area shape="rect" id="node22" href="class_t_g_server_service_1_1_server_instance.html#a7e077da7a7def0afaa4ac78d4d0a25ce" title="Pushes the paths listed in TGS3.json to the currentl git remote. No other commit differences may exis..." alt="" coords="757,436,968,477"/>
<area shape="rect" id="node25" href="class_t_g_server_service_1_1_server_instance.html#a68bcfbe8d302b30339c00ab664112037" title="Fetches the origin and merges it into the current branch &#160;" alt="" coords="757,592,968,633"/>
<area shape="rect" id="node30" href="class_t_g_server_service_1_1_server_instance.html#aeb8f7b25f00c15aed0b80f2e0cff6ef4" title="Renames the current static folder to a backup name and recreates is from the current repo using TGS3..." alt="" coords="757,800,968,841"/>
<area shape="rect" id="node35" href="class_t_g_server_service_1_1_server_instance.html#af1472fb1f361d0c3bece7d4632edc339" title="Clears the current GameAPIVersion, calls UpdateInterfaceDll(bool) with a &#160;parameter, and attempts to start the DreamDaemon Proc " alt="" coords="499,253,709,295"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac90d464e7982312e0a43f1d710bd83a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TGServerService.Service.WriteInfo </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes information to Windows the event log </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The log message</td></tr>
    <tr><td class="paramname">id</td><td>The <a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398" title="Various events and their IDs in no particular order. Found in the Windows event log. These incremented by 100 and are guaranteed to never be reused in the future. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults ">EventID</a> of the message</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00040">40</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>Referenced by <a class="el" href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00312">TGServerService.ServerInstance.ApplyStagedUpdate()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_chat_8cs_source.html#l00069">TGServerService.ServerInstance.ChatProvider_OnChatMessage()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00492">TGServerService.ServerInstance.Checkout()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00218">TGServerService.ServerInstance.Clone()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l01038">TGServerService.ServerInstance.Commit()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00296">TGServerService.ServerInstance.CompileImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00661">TGServerService.ServerInstance.CreateBackup()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00161">TGServerService.ServerInstance.DeleteFile()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00222">TGServerService.ServerInstance.GenCommsKey()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l01146">TGServerService.ServerInstance.GenerateChangelogImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00065">TGServerService.ServerInstance.HandleCommand()</a>, <a class="el" href="_preaction_handler_8cs_source.html#l00048">TGServerService.ServerInstance.HandleEvent()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00097">TGServerService.ServerInstance.InitDreamDaemon()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00794">TGServerService.ServerInstance.MergePullRequest()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00157">TGServerService.ServerInstance.MoveServer()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l01071">TGServerService.ServerInstance.Push()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00024">TGServerService.ServerInstance.ReadText()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00725">TGServerService.ServerInstance.Reset()</a>, <a class="el" href="_i_r_c_chat_provider_8cs_source.html#l00065">TGServerService.ChatProviders.IRCChatProvider.SendMessageDirect()</a>, <a class="el" href="_discord_chat_provider_8cs_source.html#l00202">TGServerService.ChatProviders.DiscordChatProvider.SendMessageDirect()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00576">TGServerService.ServerInstance.UpdateImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00524">TGServerService.ServerInstance.UpdateInterfaceDll()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00199">TGServerService.ServerInstance.UpdateToVersionImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00303">TGServerService.ServerInstance.Watchdog()</a>, and <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00109">TGServerService.ServerInstance.WriteText()</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">ActiveService</a>.EventLog.WriteEntry(message, EventLogEntryType.Information, (<span class="keywordtype">int</span>)<span class="keywordtype">id</span>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        }</div><div class="ttc" id="class_t_g_server_service_1_1_service_html_ac2057d36e9866b9fc8483ba5e56eca12"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">TGServerService.Service.ActiveService</a></div><div class="ttdeci">static Service ActiveService</div><div class="ttdoc">Singleton instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00025">Service.cs:25</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_ac90d464e7982312e0a43f1d710bd83a9_icgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_ac90d464e7982312e0a43f1d710bd83a9_icgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_ac90d464e7982312e0a43f1d710bd83a9_icgraph" id="class_t_g_server_service_1_1_service_ac90d464e7982312e0a43f1d710bd83a9_icgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_server_instance.html#a28e22392a22a56807a3c3a6a3a366860" title="Attempts to move the staged update from StagingDirectory to ByondDirectory. Sets lastError on failure..." alt="" coords="245,594,455,636"/>
<area shape="rect" id="node4" href="class_t_g_server_service_1_1_server_instance.html#a8fa16abc1470f3a09b8c5da998ad03a9" title="Setup or reattach the watchdog, depending on Properties.Settings.ReattachToDD, and create the Diagnos..." alt="" coords="1045,597,1256,638"/>
<area shape="rect" id="node8" href="class_t_g_server_service_1_1_server_instance.html#aa2d4ae32c582b1d03b22402dab486e80" title="TGServerService.ServerInstance.\lHandleCommand" alt="" coords="1563,838,1773,880"/>
<area shape="rect" id="node10" href="class_t_g_server_service_1_1_server_instance.html#a4a2dc7c3b649bf0e7f81362c851a2c8f" title="Downloads and unzips a BYOND revision. Calls ApplyStagedUpdate afterwards if the ServerInstance isn&#39;t..." alt="" coords="528,477,739,518"/>
<area shape="rect" id="node12" href="class_t_g_server_service_1_1_server_instance.html#a74914da816161c02d9833216fbcb0e25" title="Implementation of OnChatMessage that recieves messages from all channels of all connected ChatProvide..." alt="" coords="1304,57,1515,98"/>
<area shape="rect" id="node14" href="class_t_g_server_service_1_1_server_instance.html#abb15a58ceeba5348ec583a2df907350f" title="Hard checks out the passed object name &#160;" alt="" coords="245,893,455,934"/>
<area shape="rect" id="node15" href="class_t_g_server_service_1_1_server_instance.html#a14f34e7f968afb1ad7f77d8813d5799b" title="Backups up the StaticDirs and deletes the current RepoPath if they exist. Clones the given branch of ..." alt="" coords="787,813,997,854"/>
<area shape="rect" id="node17" href="class_t_g_server_service_1_1_server_instance.html#a3b36d7847cac9b98816d757747c2b795" title="Create a commit based on a Config &#160;" alt="" coords="245,958,455,1000"/>
<area shape="rect" id="node19" href="class_t_g_server_service_1_1_server_instance.html#a591be0739a0ebf1c70fa2d0615262324" title="TGServerService.ServerInstance.\lCompileImpl" alt="" coords="787,177,997,218"/>
<area shape="rect" id="node25" href="class_t_g_server_service_1_1_server_instance.html#ae69e75b4b1379d03852e6bef850dfcc4" title="Creates a date and timestamped tag of the current HEAD " alt="" coords="528,242,739,284"/>
<area shape="rect" id="node26" href="class_t_g_server_service_1_1_server_instance.html#acf09f63e7c88913016493dc9b487f902" title="Deletes the target static file &#160;" alt="" coords="245,1076,455,1117"/>
<area shape="rect" id="node27" href="class_t_g_server_service_1_1_server_instance.html#a235f24c0d390a379749a478dc5993550" title="TGServerService.ServerInstance.\lGenCommsKey" alt="" coords="245,660,455,701"/>
<area shape="rect" id="node29" href="class_t_g_server_service_1_1_server_instance.html#ab76e4c626e2b38e75781aaad0b7809a9" title="Threaded loop that keeps DreamDaemon from unintentionally stopping " alt="" coords="787,565,997,606"/>
<area shape="rect" id="node30" href="class_t_g_server_service_1_1_server_instance.html#ab71908fe1713eaf7f806a52b5608aa60" title="Updates the html changelog " alt="" coords="245,1141,455,1182"/>
<area shape="rect" id="node32" href="class_t_g_server_service_1_1_server_instance.html#a3ccef305da6b6b218054c1287ba7086b" title="Runs an event named eventName &#160;if it exists " alt="" coords="245,177,455,218"/>
<area shape="rect" id="node35" href="class_t_g_server_service_1_1_server_instance.html#ac69d8bdd66e3ba416de9412ca82a92ed" title="Merges the target pull request into the current branch if the remote is a github repository &#160;..." alt="" coords="245,1206,455,1248"/>
<area shape="rect" id="node36" href="class_t_g_server_service_1_1_server_instance.html#aa8a3c62ea83e029263e21654e184ab80" title="Moves the entire server installation, requires no operations to be running &#160;" alt="" coords="245,1272,455,1313"/>
<area shape="rect" id="node37" href="class_t_g_server_service_1_1_server_instance.html#af8c5c3b1d918969c67fda31e5a4c7ab3" title="TGServerService.ServerInstance.Push" alt="" coords="230,1024,470,1051"/>
<area shape="rect" id="node38" href="class_t_g_server_service_1_1_server_instance.html#a5b2fcd99212aba5406674cdf3175b9a1" title="Read from a static file &#160;" alt="" coords="245,1337,455,1378"/>
<area shape="rect" id="node39" href="class_t_g_server_service_1_1_server_instance.html#ad2ab144910505686ff9529a708751f8f" title="Runs git reset –hard &#160;" alt="" coords="245,1402,455,1444"/>
<area shape="rect" id="node40" href="class_t_g_server_service_1_1_chat_providers_1_1_i_r_c_chat_provider.html#a5e07ee2944f2c7805d2167a0131cc116" title="Send a message &#160;to a channel &#160;&#160;" alt="" coords="231,1468,469,1509"/>
<area shape="rect" id="node41" href="class_t_g_server_service_1_1_chat_providers_1_1_discord_chat_provider.html#a56f889ad117d2e2687e12e6cb8678471" title="Send a message &#160;to a channel &#160;&#160;" alt="" coords="220,1533,480,1574"/>
<area shape="rect" id="node42" href="class_t_g_server_service_1_1_server_instance.html#aa1258b6c6ba7f13a930e4f1c892e5b2a" title="Fetches the origin and merges it into the current branch " alt="" coords="245,360,455,401"/>
<area shape="rect" id="node44" href="class_t_g_server_service_1_1_server_instance.html#a4b4771257ed71f5145b495f85a0553da" title="Copies InterfaceDLLName from the program directory to the the ServerInstance directory ..." alt="" coords="245,725,455,766"/>
<area shape="rect" id="node47" href="class_t_g_server_service_1_1_server_instance.html#abdf26641e717823f8958ac46db3c0cc8" title="Write to a static file &#160;" alt="" coords="245,1598,455,1640"/>
<area shape="rect" id="node3" href="class_t_g_server_service_1_1_server_instance.html#a8f8c222dd4a2d21957b968b26eff08a3" title="Starts the server if it isn&#39;t running &#160;" alt="" coords="787,630,997,672"/>
<area shape="rect" id="node6" href="class_t_g_server_service_1_1_server_instance.html#ac58aa725d4b3a81cf979ab657a02cdb8" title="Immediately kills and restarts the server &#160;" alt="" coords="1045,748,1256,789"/>
<area shape="rect" id="node5" href="class_t_g_server_service_1_1_server_instance.html#a805c3433c1fd7347b862ba4a3b0ea5f8" title="Constructs and a ServerInstance " alt="" coords="1821,492,2032,533"/>
<area shape="rect" id="node7" href="class_t_g_server_service_1_1_server_instance.html#a8bdb55d2113035b09f1697072e14c873" title="TGServerService.ServerInstance.\lKillMe" alt="" coords="1304,805,1515,846"/>
<area shape="rect" id="node9" href="class_t_g_server_service_1_1_server_instance.html#a31cb383e125fcb094259185112c3ea40" title="Called from /world/ExportService(command) &#160;" alt="" coords="1821,838,2032,880"/>
<area shape="rect" id="node11" href="class_t_g_server_service_1_1_server_instance.html#a6136aa0574aa874d5532cb528e764d78" title="updates the used byond version to that of version major .minor . The change won&#39;t take place until DD..." alt="" coords="787,477,997,518"/>
<area shape="rect" id="node13" href="class_t_g_server_service_1_1_server_instance.html#a61c197535442dd090e429de96abe5466" title="Set up the ChatProviders for the ServerInstance " alt="" coords="1563,242,1773,284"/>
<area shape="rect" id="node16" href="class_t_g_server_service_1_1_server_instance.html#a3a8f527d1b8aef7962a482d8e66b370e" title="Deletes whatever may be left over and clones the repo at remote &#160;and checks out branch ..." alt="" coords="1045,813,1256,854"/>
<area shape="rect" id="node18" href="class_t_g_server_service_1_1_server_instance.html#a7e077da7a7def0afaa4ac78d4d0a25ce" title="Pushes the paths listed in TGS3.json to the currentl git remote. No other commit differences may exis..." alt="" coords="528,988,739,1029"/>
<area shape="rect" id="node20" href="class_t_g_server_service_1_1_server_instance.html#afdd737c980b2c078c2de10a57dc4ad40" title="Does all the necessary actions to take the revision currently in the repository and compile it to be ..." alt="" coords="1045,242,1256,284"/>
<area shape="rect" id="node23" href="class_t_g_server_service_1_1_server_instance.html#aabf31525de01a260b7a83ce8ac928d62" title="TGServerService.ServerInstance.\lInitializeImpl" alt="" coords="1045,177,1256,218"/>
<area shape="rect" id="node21" href="class_t_g_server_service_1_1_server_instance.html#af0d1ea78a382258b4ddcf815cb23f7ba" title="Runs on the configured Properties.Settings.AutoUpdateInterval and tries to Update(bool) and Compile(b..." alt="" coords="1304,301,1515,342"/>
<area shape="rect" id="node22" href="class_t_g_server_service_1_1_server_instance.html#ac4444f5e9e540e4d8222da5d9ff42940" title="Initializes the repository " alt="" coords="1563,492,1773,533"/>
<area shape="rect" id="node24" href="class_t_g_server_service_1_1_server_instance.html#a427984d1cb5c60f217967795c9695998" title="Sets up the symlinks for hotswapping game code. This will reset everything in the Game folder..." alt="" coords="1304,177,1515,218"/>
<area shape="rect" id="node28" href="class_t_g_server_service_1_1_server_instance.html#af1472fb1f361d0c3bece7d4632edc339" title="Clears the current GameAPIVersion, calls UpdateInterfaceDll(bool) with a &#160;parameter, and attempts to start the DreamDaemon Proc " alt="" coords="528,645,739,686"/>
<area shape="rect" id="node31" href="class_t_g_server_service_1_1_server_instance.html#adbff0b841a8e339a79890a1a91be1fef" title="Updates the html changelog &#160;" alt="" coords="528,1141,739,1182"/>
<area shape="rect" id="node33" href="class_t_g_server_service_1_1_server_instance.html#a74d6e8df896a4a8f6f1faa7d67a2bbde" title="Run the &quot;postcompile&quot; event " alt="" coords="528,112,739,153"/>
<area shape="rect" id="node34" href="class_t_g_server_service_1_1_server_instance.html#af19d01601edb8beb1e78ffdcaf572c47" title="Run the &quot;precompile&quot; event " alt="" coords="528,177,739,218"/>
<area shape="rect" id="node43" href="class_t_g_server_service_1_1_server_instance.html#a68bcfbe8d302b30339c00ab664112037" title="Fetches the origin and merges it into the current branch &#160;" alt="" coords="528,360,739,401"/>
<area shape="rect" id="node45" href="class_t_g_server_service_1_1_server_instance.html#a5ce4ab9dd00a38f8e434a54ef8978dde" title="Initial setup for the StaticDirs and CachedTGS3SettingsPath " alt="" coords="528,762,739,804"/>
<area shape="rect" id="node46" href="class_t_g_server_service_1_1_server_instance.html#aeb8f7b25f00c15aed0b80f2e0cff6ef4" title="Renames the current static folder to a backup name and recreates is from the current repo using TGS3..." alt="" coords="787,748,997,789"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae3c4dfb35fce33f3462633036bc5af14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void TGServerService.Service.WriteWarning </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398">EventID</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes a warning to the Windows event log </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The log message</td></tr>
    <tr><td class="paramname">id</td><td>The <a class="el" href="namespace_t_g_server_service.html#a98d8f6303b894422167c743e15185398" title="Various events and their IDs in no particular order. Found in the Windows event log. These incremented by 100 and are guaranteed to never be reused in the future. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults ">EventID</a> of the message</td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00058">58</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>Referenced by <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00492">TGServerService.ServerInstance.Checkout()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00218">TGServerService.ServerInstance.Clone()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l01038">TGServerService.ServerInstance.Commit()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_compiler_8cs_source.html#l00296">TGServerService.ServerInstance.CompileImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00661">TGServerService.ServerInstance.CreateBackup()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00161">TGServerService.ServerInstance.DeleteFile()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l01146">TGServerService.ServerInstance.GenerateChangelogImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00065">TGServerService.ServerInstance.HandleCommand()</a>, <a class="el" href="_preaction_handler_8cs_source.html#l00048">TGServerService.ServerInstance.HandleEvent()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_chat_8cs_source.html#l00025">TGServerService.ServerInstance.InitChat()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00336">TGServerService.ServerInstance.InitialConfigureRepository()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_interop_8cs_source.html#l00237">TGServerService.ServerInstance.InteropMessage()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00794">TGServerService.ServerInstance.MergePullRequest()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_administration_8cs_source.html#l00157">TGServerService.ServerInstance.MoveServer()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l01071">TGServerService.ServerInstance.Push()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00024">TGServerService.ServerInstance.ReadText()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00725">TGServerService.ServerInstance.Reset()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_chat_8cs_source.html#l00223">TGServerService.ServerInstance.SendMessage()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00576">TGServerService.ServerInstance.UpdateImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_repository_8cs_source.html#l00627">TGServerService.ServerInstance.UpdateSubmodules()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_byond_8cs_source.html#l00199">TGServerService.ServerInstance.UpdateToVersionImpl()</a>, <a class="el" href="_t_g_server_service_2_server_instance_2_dream_daemon_8cs_source.html#l00303">TGServerService.ServerInstance.Watchdog()</a>, and <a class="el" href="_t_g_server_service_2_server_instance_2_config_8cs_source.html#l00109">TGServerService.ServerInstance.WriteText()</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        {</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <a class="code" href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">ActiveService</a>.EventLog.WriteEntry(message, EventLogEntryType.Warning, (<span class="keywordtype">int</span>)<span class="keywordtype">id</span>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        }</div><div class="ttc" id="class_t_g_server_service_1_1_service_html_ac2057d36e9866b9fc8483ba5e56eca12"><div class="ttname"><a href="class_t_g_server_service_1_1_service.html#ac2057d36e9866b9fc8483ba5e56eca12">TGServerService.Service.ActiveService</a></div><div class="ttdeci">static Service ActiveService</div><div class="ttdoc">Singleton instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_server_service_2_service_8cs_source.html#l00025">Service.cs:25</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="class_t_g_server_service_1_1_service_ae3c4dfb35fce33f3462633036bc5af14_icgraph.png" border="0" usemap="#class_t_g_server_service_1_1_service_ae3c4dfb35fce33f3462633036bc5af14_icgraph" alt=""/></div>
<map name="class_t_g_server_service_1_1_service_ae3c4dfb35fce33f3462633036bc5af14_icgraph" id="class_t_g_server_service_1_1_service_ae3c4dfb35fce33f3462633036bc5af14_icgraph">
<area shape="rect" id="node2" href="class_t_g_server_service_1_1_server_instance.html#abb15a58ceeba5348ec583a2df907350f" title="Hard checks out the passed object name &#160;" alt="" coords="767,565,977,607"/>
<area shape="rect" id="node3" href="class_t_g_server_service_1_1_server_instance.html#a14f34e7f968afb1ad7f77d8813d5799b" title="Backups up the StaticDirs and deletes the current RepoPath if they exist. Clones the given branch of ..." alt="" coords="508,71,719,112"/>
<area shape="rect" id="node5" href="class_t_g_server_service_1_1_server_instance.html#a3b36d7847cac9b98816d757747c2b795" title="Create a commit based on a Config &#160;" alt="" coords="235,1696,445,1737"/>
<area shape="rect" id="node7" href="class_t_g_server_service_1_1_server_instance.html#a591be0739a0ebf1c70fa2d0615262324" title="TGServerService.ServerInstance.\lCompileImpl" alt="" coords="767,363,977,404"/>
<area shape="rect" id="node14" href="class_t_g_server_service_1_1_server_instance.html#ae69e75b4b1379d03852e6bef850dfcc4" title="Creates a date and timestamped tag of the current HEAD " alt="" coords="235,359,445,400"/>
<area shape="rect" id="node15" href="class_t_g_server_service_1_1_server_instance.html#acf09f63e7c88913016493dc9b487f902" title="Deletes the target static file &#160;" alt="" coords="235,1761,445,1803"/>
<area shape="rect" id="node16" href="class_t_g_server_service_1_1_server_instance.html#ab71908fe1713eaf7f806a52b5608aa60" title="Updates the html changelog " alt="" coords="235,1827,445,1868"/>
<area shape="rect" id="node18" href="class_t_g_server_service_1_1_server_instance.html#aa2d4ae32c582b1d03b22402dab486e80" title="TGServerService.ServerInstance.\lHandleCommand" alt="" coords="1801,1448,2012,1489"/>
<area shape="rect" id="node19" href="class_t_g_server_service_1_1_server_instance.html#a31cb383e125fcb094259185112c3ea40" title="Called from /world/ExportService(command) &#160;" alt="" coords="2060,1517,2271,1559"/>
<area shape="rect" id="node20" href="class_t_g_server_service_1_1_server_instance.html#a3ccef305da6b6b218054c1287ba7086b" title="Runs an event named eventName &#160;if it exists " alt="" coords="235,293,445,335"/>
<area shape="rect" id="node23" href="class_t_g_server_service_1_1_server_instance.html#a61c197535442dd090e429de96abe5466" title="Set up the ChatProviders for the ServerInstance " alt="" coords="1543,311,1753,352"/>
<area shape="rect" id="node24" href="class_t_g_server_service_1_1_server_instance.html#a5ce4ab9dd00a38f8e434a54ef8978dde" title="Initial setup for the StaticDirs and CachedTGS3SettingsPath " alt="" coords="235,20,445,61"/>
<area shape="rect" id="node26" href="class_t_g_server_service_1_1_server_instance.html#ac69d8bdd66e3ba416de9412ca82a92ed" title="Merges the target pull request into the current branch if the remote is a github repository &#160;..." alt="" coords="767,653,977,695"/>
<area shape="rect" id="node27" href="class_t_g_server_service_1_1_server_instance.html#aa8a3c62ea83e029263e21654e184ab80" title="Moves the entire server installation, requires no operations to be running &#160;" alt="" coords="235,1892,445,1933"/>
<area shape="rect" id="node28" href="class_t_g_server_service_1_1_server_instance.html#af8c5c3b1d918969c67fda31e5a4c7ab3" title="TGServerService.ServerInstance.Push" alt="" coords="220,1645,460,1671"/>
<area shape="rect" id="node29" href="class_t_g_server_service_1_1_server_instance.html#a5b2fcd99212aba5406674cdf3175b9a1" title="Read from a static file &#160;" alt="" coords="235,1957,445,1999"/>
<area shape="rect" id="node30" href="class_t_g_server_service_1_1_server_instance.html#ad2ab144910505686ff9529a708751f8f" title="Runs git reset –hard &#160;" alt="" coords="508,1427,719,1468"/>
<area shape="rect" id="node31" href="class_t_g_server_service_1_1_server_instance.html#ae6ea9140e5cf33703628ac25700bc556" title="Broadcast a message to appropriate channels based on the message type " alt="" coords="235,989,445,1031"/>
<area shape="rect" id="node37" href="class_t_g_server_service_1_1_server_instance.html#a4a2dc7c3b649bf0e7f81362c851a2c8f" title="Downloads and unzips a BYOND revision. Calls ApplyStagedUpdate afterwards if the ServerInstance isn&#39;t..." alt="" coords="767,1260,977,1301"/>
<area shape="rect" id="node43" href="class_t_g_server_service_1_1_server_instance.html#aa1258b6c6ba7f13a930e4f1c892e5b2a" title="Fetches the origin and merges it into the current branch " alt="" coords="767,741,977,783"/>
<area shape="rect" id="node46" href="class_t_g_server_service_1_1_server_instance.html#a95d603da4a4dcd14255f39bbf59931ad" title="Properly updates any git submodules in the repository " alt="" coords="508,624,719,665"/>
<area shape="rect" id="node47" href="class_t_g_server_service_1_1_server_instance.html#ab76e4c626e2b38e75781aaad0b7809a9" title="Threaded loop that keeps DreamDaemon from unintentionally stopping " alt="" coords="508,1143,719,1184"/>
<area shape="rect" id="node49" href="class_t_g_server_service_1_1_server_instance.html#abdf26641e717823f8958ac46db3c0cc8" title="Write to a static file &#160;" alt="" coords="235,2023,445,2064"/>
<area shape="rect" id="node4" href="class_t_g_server_service_1_1_server_instance.html#a3a8f527d1b8aef7962a482d8e66b370e" title="Deletes whatever may be left over and clones the repo at remote &#160;and checks out branch ..." alt="" coords="767,71,977,112"/>
<area shape="rect" id="node6" href="class_t_g_server_service_1_1_server_instance.html#a7e077da7a7def0afaa4ac78d4d0a25ce" title="Pushes the paths listed in TGS3.json to the currentl git remote. No other commit differences may exis..." alt="" coords="508,1671,719,1712"/>
<area shape="rect" id="node8" href="class_t_g_server_service_1_1_server_instance.html#afdd737c980b2c078c2de10a57dc4ad40" title="Does all the necessary actions to take the revision currently in the repository and compile it to be ..." alt="" coords="1025,493,1236,535"/>
<area shape="rect" id="node12" href="class_t_g_server_service_1_1_server_instance.html#aabf31525de01a260b7a83ce8ac928d62" title="TGServerService.ServerInstance.\lInitializeImpl" alt="" coords="1025,855,1236,896"/>
<area shape="rect" id="node9" href="class_t_g_server_service_1_1_server_instance.html#af0d1ea78a382258b4ddcf815cb23f7ba" title="Runs on the configured Properties.Settings.AutoUpdateInterval and tries to Update(bool) and Compile(b..." alt="" coords="1284,556,1495,597"/>
<area shape="rect" id="node10" href="class_t_g_server_service_1_1_server_instance.html#ac4444f5e9e540e4d8222da5d9ff42940" title="Initializes the repository " alt="" coords="1543,556,1753,597"/>
<area shape="rect" id="node11" href="class_t_g_server_service_1_1_server_instance.html#a805c3433c1fd7347b862ba4a3b0ea5f8" title="Constructs and a ServerInstance " alt="" coords="1801,556,2012,597"/>
<area shape="rect" id="node13" href="class_t_g_server_service_1_1_server_instance.html#a427984d1cb5c60f217967795c9695998" title="Sets up the symlinks for hotswapping game code. This will reset everything in the Game folder..." alt="" coords="1284,855,1495,896"/>
<area shape="rect" id="node17" href="class_t_g_server_service_1_1_server_instance.html#adbff0b841a8e339a79890a1a91be1fef" title="Updates the html changelog &#160;" alt="" coords="508,1827,719,1868"/>
<area shape="rect" id="node21" href="class_t_g_server_service_1_1_server_instance.html#a74d6e8df896a4a8f6f1faa7d67a2bbde" title="Run the &quot;postcompile&quot; event " alt="" coords="508,239,719,280"/>
<area shape="rect" id="node22" href="class_t_g_server_service_1_1_server_instance.html#af19d01601edb8beb1e78ffdcaf572c47" title="Run the &quot;precompile&quot; event " alt="" coords="508,304,719,345"/>
<area shape="rect" id="node25" href="class_t_g_server_service_1_1_server_instance.html#aeb8f7b25f00c15aed0b80f2e0cff6ef4" title="Renames the current static folder to a backup name and recreates is from the current repo using TGS3..." alt="" coords="508,5,719,47"/>
<area shape="rect" id="node32" href="class_t_g_server_service_1_1_server_instance.html#a28e22392a22a56807a3c3a6a3a366860" title="Attempts to move the staged update from StagingDirectory to ByondDirectory. Sets lastError on failure..." alt="" coords="508,1208,719,1249"/>
<area shape="rect" id="node34" href="class_t_g_server_service_1_1_server_instance.html#a8fa16abc1470f3a09b8c5da998ad03a9" title="Setup or reattach the watchdog, depending on Properties.Settings.ReattachToDD, and create the Diagnos..." alt="" coords="1284,993,1495,1035"/>
<area shape="rect" id="node35" href="class_t_g_server_service_1_1_server_instance.html#ac58aa725d4b3a81cf979ab657a02cdb8" title="Immediately kills and restarts the server &#160;" alt="" coords="1284,1311,1495,1352"/>
<area shape="rect" id="node39" href="class_t_g_server_service_1_1_server_instance.html#a901e893be86572cf6a8d539e83de4b2c" title="Either let go of Proc for reattachment or terminate it, depending on Properties.Settings.ReattachToDD " alt="" coords="508,1077,719,1119"/>
<area shape="rect" id="node42" href="class_t_g_server_service_1_1_server_instance.html#a533ddcf0f8c4cd09d87b3e4eae916ccf" title="Merges given committish &#160;into the current branch " alt="" coords="508,741,719,783"/>
<area shape="rect" id="node45" href="class_t_g_server_service_1_1_server_instance.html#af6f5ef18b0129ec5d24f76a13c044feb" title="Next stop of the service will not close DD and sets a flag for it to reattach once it restarts &#160;..." alt="" coords="508,960,719,1001"/>
<area shape="rect" id="node33" href="class_t_g_server_service_1_1_server_instance.html#a8f8c222dd4a2d21957b968b26eff08a3" title="Starts the server if it isn&#39;t running &#160;" alt="" coords="1025,1168,1236,1209"/>
<area shape="rect" id="node36" href="class_t_g_server_service_1_1_server_instance.html#a8bdb55d2113035b09f1697072e14c873" title="TGServerService.ServerInstance.\lKillMe" alt="" coords="1543,1311,1753,1352"/>
<area shape="rect" id="node38" href="class_t_g_server_service_1_1_server_instance.html#a6136aa0574aa874d5532cb528e764d78" title="updates the used byond version to that of version major .minor . The change won&#39;t take place until DD..." alt="" coords="1025,1260,1236,1301"/>
<area shape="rect" id="node40" href="class_t_g_server_service_1_1_server_instance.html#aea7eda46fd144259303499dfa412f1ac" title="Cleans up the ServerInstance " alt="" coords="767,1077,977,1119"/>
<area shape="rect" id="node41" href="class_t_g_server_service_1_1_server_instance.html#a775202498bd013e4e6baba11dc7a72a4" title="Implements the IDisposable pattern. Calls RunDisposals " alt="" coords="1025,1077,1236,1119"/>
<area shape="rect" id="node44" href="class_t_g_server_service_1_1_server_instance.html#a68bcfbe8d302b30339c00ab664112037" title="Fetches the origin and merges it into the current branch &#160;" alt="" coords="1025,741,1236,783"/>
<area shape="rect" id="node48" href="class_t_g_server_service_1_1_server_instance.html#af1472fb1f361d0c3bece7d4632edc339" title="Clears the current GameAPIVersion, calls UpdateInterfaceDll(bool) with a &#160;parameter, and attempts to start the DreamDaemon Proc " alt="" coords="767,1143,977,1184"/>
</map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ac2057d36e9866b9fc8483ba5e56eca12"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_t_g_server_service_1_1_service.html">Service</a> TGServerService.Service.ActiveService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Singleton instance </p>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00025">25</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a41aed3f3d48cd6d1c8b2d64acb08e8b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ServiceHost TGServerService.Service.host</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The WCF host that the Interface connects to </p>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00076">76</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

</div>
</div>
<a class="anchor" id="a525cf1bdbe2b21a7bcb7775be30ce656"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly string TGServerService.Service.Version = &quot;/tg/station 13 Server <a class="el" href="class_t_g_server_service_1_1_service.html">Service</a> v&quot; + FileVersionInfo.GetVersionInfo(System.Reflection.Assembly.GetExecutingAssembly().Location).FileVersion</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The service version string based on the FileVersionInfo </p>

<p>Definition at line <a class="el" href="_t_g_server_service_2_service_8cs_source.html#l00020">20</a> of file <a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a>.</p>

<p>Referenced by <a class="el" href="_i_r_c_chat_provider_8cs_source.html#l00045">TGServerService.ChatProviders.IRCChatProvider.IRCChatProvider()</a>, and <a class="el" href="_server_instance_8cs_source.html#l00045">TGServerService.ServerInstance.Version()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>TGServerService/<a class="el" href="_t_g_server_service_2_service_8cs_source.html">Service.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
