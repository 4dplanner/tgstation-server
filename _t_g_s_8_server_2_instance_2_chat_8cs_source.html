<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tgstation-server: TGS.Server/Instance/Chat.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tgs.ico"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tgstation-server
   </div>
   <div id="projectbrief">The /tg/station 13 server suite</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d416ca425b5524beda4d68f02698bdb3.html">TGS.Server</a></li><li class="navelem"><a class="el" href="dir_247dc62efdba86a5141239c39fc82c17.html">Instance</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Chat.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_t_g_s_8_server_2_instance_2_chat_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> Newtonsoft.Json;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="_t_g_s_8_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a>;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Linq;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_s.html">TGS</a>.<a class="code" href="namespace_t_g_s_1_1_server.html">Server</a>.<a class="code" href="namespace_t_g_s_1_1_server_1_1_chat_commands.html">ChatCommands</a>;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_s.html">TGS</a>.<a class="code" href="namespace_t_g_s_1_1_server.html">Server</a>.<a class="code" href="namespace_t_g_s_1_1_server_1_1_chat_providers.html">ChatProviders</a>;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_s.html">TGS</a>.<a class="code" href="namespace_t_g_s_1_1_interface.html">Interface</a>;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_t_g_s.html">TGS</a>.<a class="code" href="namespace_t_g_s_1_1_interface.html">Interface</a>.<a class="code" href="namespace_t_g_s_1_1_interface_1_1_components.html">Components</a>;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_t_g_s.html">TGS</a>.Server</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;{</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    sealed <span class="keyword">partial class </span>Instance : <a class="code" href="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_chat.html">ITGChat</a></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    {</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#ab4d494c522d7d11a1889003a6f6d6c59">   17</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">const</span> <span class="keywordtype">string</span> UninitializedString = <span class="stringliteral">&quot;NEEDS INITIALIZING&quot;</span>;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a92962bd476db8f04fa4a1a765e9f43a1">   22</a></span>&#160;        IList&lt;IChatProvider&gt; <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a92962bd476db8f04fa4a1a765e9f43a1">ChatProviders</a>;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a5eb2c7e91e5df165a4e705f606af9173">   26</a></span>&#160;        <span class="keywordtype">object</span> ChatLock = <span class="keyword">new</span> object();</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a6791c9be7a1f6784b1b84d3365ba5151">   31</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a6791c9be7a1f6784b1b84d3365ba5151">InitChat</a>()</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        {</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            var infos = InitProviderInfos();</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;            ChatProviders = <span class="keyword">new</span> List&lt;IChatProvider&gt;(infos.Count);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;            <span class="keywordflow">foreach</span> (var info <span class="keywordflow">in</span> infos)</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                <a class="code" href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html">IChatProvider</a> chatProvider;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                {</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                    <span class="keywordflow">switch</span> (info.Provider)</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                    {</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_t_g_s_1_1_interface.html#a697d691c1d8794ac9898b4fe67f983c2">ChatProvider</a>.Discord:</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                            chatProvider = <span class="keyword">new</span> <a class="code" href="class_t_g_s_1_1_server_1_1_chat_providers_1_1_discord_chat_provider.html">DiscordChatProvider</a>(info);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_t_g_s_1_1_interface.html#a697d691c1d8794ac9898b4fe67f983c2">ChatProvider</a>.IRC:</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                            chatProvider = <span class="keyword">new</span> <a class="code" href="class_t_g_s_1_1_server_1_1_chat_providers_1_1_i_r_c_chat_provider.html">IRCChatProvider</a>(info);</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                            WriteError(String.Format(<span class="stringliteral">&quot;Invalid chat provider: {0}&quot;</span>, info.Provider), <a class="code" href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">EventID</a>.InvalidChatProvider);</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                    }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                }</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                <span class="keywordflow">catch</span> (Exception e)</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                    WriteError(String.Format(<span class="stringliteral">&quot;Failed to start chat provider {0}! Error: {1}&quot;</span>, info.Provider, e.ToString()), <a class="code" href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">EventID</a>.ChatProviderStartFail);</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                    <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                }</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                chatProvider.<a class="code" href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html#ab5b830098a3f927def58c2bf1f476bb2">OnChatMessage</a> += ChatProvider_OnChatMessage;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                var res = chatProvider.<a class="code" href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html#a4f10743426559ccd8c522d49d10106ce">Connect</a>();</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                <span class="keywordflow">if</span> (res != null)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                    WriteWarning(String.Format(<span class="stringliteral">&quot;Unable to connect to chat! Provider {0}, Error: {1}&quot;</span>, chatProvider.GetType().ToString(), res), <a class="code" href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">EventID</a>.ChatConnectFail);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                ChatProviders.Add(chatProvider);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a6f1914e254474070254a2666226455d1">   75</a></span>&#160;        <span class="keyword">private</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a6f1914e254474070254a2666226455d1">ChatProvider_OnChatMessage</a>(<a class="code" href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html">IChatProvider</a> <a class="code" href="namespace_t_g_s_1_1_interface.html#a697d691c1d8794ac9898b4fe67f983c2">ChatProvider</a>, <span class="keywordtype">string</span> speaker, <span class="keywordtype">string</span> channel, <span class="keywordtype">string</span> message, <span class="keywordtype">bool</span> isAdmin, <span class="keywordtype">bool</span> isAdminChannel)</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            var splits = message.Trim().Split(<span class="charliteral">&#39; &#39;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="keywordflow">if</span> (splits.Length == 1 &amp;&amp; splits[0] == <span class="stringliteral">&quot;&quot;</span>)</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                ChatProvider.<a class="code" href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html#a65a8ad08f620f56df83c338e6e9862c9">SendMessageDirect</a>(<span class="stringliteral">&quot;Hi!&quot;</span>, channel);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            var asList = <span class="keyword">new</span> List&lt;string&gt;(splits);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <a class="code" href="class_t_g_s_1_1_interface_1_1_command.html">Command</a>.<a class="code" href="class_t_g_s_1_1_interface_1_1_command.html#a557b33f5c2ba313a55ea4c7709768bb4">OutputProcVar</a>.Value = (m) =&gt; ChatProvider.<a class="code" href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html#a65a8ad08f620f56df83c338e6e9862c9">SendMessageDirect</a>(m, channel);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <a class="code" href="class_t_g_s_1_1_server_1_1_chat_commands_1_1_chat_command.html">ChatCommand</a>.<a class="code" href="class_t_g_s_1_1_server_1_1_chat_commands_1_1_chat_command.html#aa806a610b632a7439e4267796c176d81">CommandInfo</a>.Value = <span class="keyword">new</span> <a class="code" href="class_t_g_s_1_1_server_1_1_chat_commands_1_1_command_info.html">CommandInfo</a>()</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                IsAdmin = isAdmin,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                IsAdminChannel = isAdminChannel,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                Speaker = speaker,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <a class="code" href="class_t_g_s_1_1_server_1_1_server.html">Server</a> = <span class="keyword">this</span>,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            };</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            WriteInfo(String.Format(<span class="stringliteral">&quot;Chat Command from {0} ({2}): {1}&quot;</span>, speaker, String.Join(<span class="stringliteral">&quot; &quot;</span>, asList), channel), <a class="code" href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">EventID</a>.ChatCommand);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">if</span> (ServerChatCommands == null)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                LoadServerChatCommands();</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="keyword">new</span> <a class="code" href="class_t_g_s_1_1_server_1_1_chat_commands_1_1_root_chat_command.html">RootChatCommand</a>(ServerChatCommands).<a class="code" href="class_t_g_s_1_1_interface_1_1_command.html#ad3b7f770775f3ad709530c32955796e7">DoRun</a>(asList);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a2862110636bab21070659ae80a9db6cc">  104</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a2862110636bab21070659ae80a9db6cc">DisposeChat</a>()</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            var infosList = <span class="keyword">new</span> List&lt;IList&lt;string&gt;&gt;();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="keywordflow">foreach</span> (var <a class="code" href="namespace_t_g_s_1_1_interface.html#a697d691c1d8794ac9898b4fe67f983c2">ChatProvider</a> <span class="keywordflow">in</span> ChatProviders)</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                infosList.Add(ChatProvider.ProviderInfo().DataFields);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                ChatProvider.Dispose();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            ChatProviders = null;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            var rawdata = JsonConvert.SerializeObject(infosList, Formatting.Indented);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            Config.ChatProviderData = Interface.Helpers.EncryptData(rawdata, out <span class="keywordtype">string</span> entrp);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            Config.ChatProviderEntropy = entrp;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#afa2e889e6de36dee6c8becad099272b4">  122</a></span>&#160;        <span class="keyword">public</span> IList&lt;ChatSetupInfo&gt; <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#afa2e889e6de36dee6c8becad099272b4">ProviderInfos</a>()</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        {</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            var infosList = <span class="keyword">new</span> List&lt;ChatSetupInfo&gt;();</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">foreach</span> (var chatProvider <span class="keywordflow">in</span> ChatProviders)</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                infosList.Add(chatProvider.ProviderInfo());</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">return</span> infosList;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#af92fd5a1d84bdc9ca61284557561d5c0">  134</a></span>&#160;        IList&lt;ChatSetupInfo&gt; <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#af92fd5a1d84bdc9ca61284557561d5c0">InitProviderInfos</a>()</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            lock (ChatLock)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                var rawdata = Config.ChatProviderData;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                <span class="keywordflow">if</span> (rawdata == UninitializedString)</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;ChatSetupInfo&gt;() { <span class="keyword">new</span> <a class="code" href="class_t_g_s_1_1_interface_1_1_i_r_c_setup_info.html">IRCSetupInfo</a>() { Nickname = Config.Name }, <span class="keyword">new</span> <a class="code" href="class_t_g_s_1_1_interface_1_1_discord_setup_info.html">DiscordSetupInfo</a>() };</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                <span class="keywordtype">string</span> plaintext;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <span class="keywordflow">try</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    plaintext = Interface.Helpers.DecryptData(rawdata, Config.ChatProviderEntropy);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                    </div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    var lists = JsonConvert.DeserializeObject&lt;List&lt;List&lt;string&gt;&gt;&gt;(plaintext);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    var output = <span class="keyword">new</span> List&lt;ChatSetupInfo&gt;(lists.Count);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    var foundirc = 0;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    var founddiscord = 0;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    <span class="keywordflow">foreach</span> (var l <span class="keywordflow">in</span> lists)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                        var info = <span class="keyword">new</span> <a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html">ChatSetupInfo</a>(l);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                        <span class="keywordflow">if</span> (info.Provider == ChatProvider.Discord)</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                            ++founddiscord;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (info.Provider == ChatProvider.IRC)</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                            ++foundirc;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                        output.Add(info);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    <span class="keywordflow">if</span> (foundirc != 1 || founddiscord != 1)</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                        <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception();</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                    </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    <span class="keywordflow">return</span> output;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <span class="keywordflow">catch</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                    Config.ChatProviderData = UninitializedString;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                }</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="comment">//if we get here we want to retry</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">return</span> InitProviderInfos();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a8b657fb564360ff614d9801b9c77af6a">  176</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a8b657fb564360ff614d9801b9c77af6a">SetProviderInfo</a>(<a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html">ChatSetupInfo</a> info)</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            info.<a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#ace510c77103bff0d709cc753e05cb2af">AdminList</a>.RemoveAll(x =&gt; String.IsNullOrWhiteSpace(x));</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            info.<a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a7773ef4bf249fd77b610af017a8b19ec">AdminChannels</a>.RemoveAll(x =&gt; String.IsNullOrWhiteSpace(x));</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            info.<a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a900c9816cf16a3fc5d2f50ab7c05ec86">GameChannels</a>.RemoveAll(x =&gt; String.IsNullOrWhiteSpace(x));</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            info.<a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a9138785460803a411ab936d5b723a3fc">DevChannels</a>.RemoveAll(x =&gt; String.IsNullOrWhiteSpace(x));</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            info.<a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a0a4225cbe012a5fe9be7974925089b49">WatchdogChannels</a>.RemoveAll(x =&gt; String.IsNullOrWhiteSpace(x));</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="keywordflow">try</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                lock (ChatLock)</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <span class="keywordflow">foreach</span> (var ChatProvider <span class="keywordflow">in</span> ChatProviders)</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        <span class="keywordflow">if</span> (info.<a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a76983b47e811711a14aa573bbdcce99e">Provider</a> == ChatProvider.ProviderInfo().Provider)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                            <span class="keywordflow">return</span> ChatProvider.SetProviderInfo(info);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Error: Invalid provider: &quot;</span> + info.<a class="code" href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a76983b47e811711a14aa573bbdcce99e">Provider</a>.ToString();</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">catch</span> (Exception e)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="keywordflow">return</span> e.ToString();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            }</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#ab53a558e8ef6a5b06b9260bd0f26f9fc">  200</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#ab53a558e8ef6a5b06b9260bd0f26f9fc">Connected</a>(ChatProvider providerType)</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">foreach</span> (var I <span class="keywordflow">in</span> ChatProviders)</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <span class="keywordflow">if</span> (I.ProviderInfo().Provider == providerType)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                    <span class="keywordflow">return</span> I.Connected();</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a40a41b02fd430dabaea6e6dde3f087c7">  211</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a40a41b02fd430dabaea6e6dde3f087c7">ChatConnectivityCheck</a>()</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">foreach</span> (ChatProvider I <span class="keywordflow">in</span> Enum.GetValues(typeof(ChatProvider)))</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                <span class="keywordflow">if</span>(!<a class="code" href="namespace_t_g_s_1_1_interface.html#a6aba89d82a2fad3044034cdca1060c4fa2ec0d16e4ca169baedb9b2d50ec5c6d7">Connected</a>(I))</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    Reconnect(I);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#aae20c369c53d4bdc6d6c7c8528ce10e6">  219</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#aae20c369c53d4bdc6d6c7c8528ce10e6">Reconnect</a>(ChatProvider providerType)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">foreach</span> (var I <span class="keywordflow">in</span> ChatProviders)</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <span class="keywordflow">if</span> (I.ProviderInfo().Provider == providerType)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    <span class="keywordflow">return</span> I.Reconnect();</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            <span class="keywordflow">return</span> <span class="stringliteral">&quot;Could not find specified provider!&quot;</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        </div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="class_t_g_s_1_1_server_1_1_instance.html#a4a6845e432d1c660cd56eb2e26b176b2">  232</a></span>&#160;        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code" href="class_t_g_s_1_1_server_1_1_instance.html#a4a6845e432d1c660cd56eb2e26b176b2">SendMessage</a>(<span class="keywordtype">string</span> msg, <a class="code" href="namespace_t_g_s_1_1_server.html#ac244e362b52b9feac67ac6c2ca27f522">MessageType</a> mt)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            lock (ChatLock)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="keywordflow">foreach</span> (var ChatProvider <span class="keywordflow">in</span> ChatProviders)</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                    <span class="keywordflow">try</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                    {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                        ChatProvider.SendMessage(msg, mt);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                    }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    <span class="keywordflow">catch</span> (Exception e)</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                    {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        WriteWarning(String.Format(<span class="stringliteral">&quot;Chat broadcast failed (Provider: {3}) (Flags: {0}) (Message: {1}): {2}&quot;</span>, mt, msg, e.ToString(), ChatProvider.ProviderInfo().Provider), <a class="code" href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">EventID</a>.ChatBroadcastFail);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                    }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_aae20c369c53d4bdc6d6c7c8528ce10e6"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#aae20c369c53d4bdc6d6c7c8528ce10e6">TGS.Server.Instance.Reconnect</a></div><div class="ttdeci">string Reconnect(ChatProvider providerType)</div><div class="ttdoc">Reconnect a specific providerType  to it&amp;#39;s chat service  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00219">Chat.cs:219</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_chat_commands_1_1_chat_command_html_aa806a610b632a7439e4267796c176d81"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_chat_commands_1_1_chat_command.html#aa806a610b632a7439e4267796c176d81">TGS.Server.ChatCommands.ChatCommand.CommandInfo</a></div><div class="ttdeci">static ThreadLocal&lt; CommandInfo &gt; CommandInfo</div><div class="ttdoc">CommandInfo for the ChatCommand </div><div class="ttdef"><b>Definition:</b> <a href="_chat_command_8cs_source.html#l00015">ChatCommand.cs:15</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_chat_html"><div class="ttname"><a href="interface_t_g_s_1_1_interface_1_1_components_1_1_i_t_g_chat.html">TGS.Interface.Components.ITGChat</a></div><div class="ttdoc">Interface for handling chat bot </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_interface_2_components_2_chat_8cs_source.html#l00010">Chat.cs:10</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_discord_setup_info_html"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_discord_setup_info.html">TGS.Interface.DiscordSetupInfo</a></div><div class="ttdoc">Chat provider for Discord. Admin entires should be user ids in normal mode or group ids in special mo...</div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00306">ChatSetupInfo.cs:306</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_chat_commands_1_1_command_info_html"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_chat_commands_1_1_command_info.html">TGS.Server.ChatCommands.CommandInfo</a></div><div class="ttdoc">Metadata about the currently running ChatCommand </div><div class="ttdef"><b>Definition:</b> <a href="_command_info_8cs_source.html#l00006">CommandInfo.cs:6</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_chat_setup_info_html_a9138785460803a411ab936d5b723a3fc"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a9138785460803a411ab936d5b723a3fc">TGS.Interface.ChatSetupInfo.DevChannels</a></div><div class="ttdeci">List&lt; string &gt; DevChannels</div><div class="ttdoc">The channels to which repo and compile messages are sent </div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00161">ChatSetupInfo.cs:161</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_i_r_c_setup_info_html"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_i_r_c_setup_info.html">TGS.Interface.IRCSetupInfo</a></div><div class="ttdoc">Chat provider for IRC. Admin entries should be user nicknames in normal mode or required channel flag...</div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00216">ChatSetupInfo.cs:216</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_interface_html"><div class="ttname"><a href="namespace_t_g_s_1_1_interface.html">TGS.Interface</a></div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00006">ChatSetupInfo.cs:6</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_afa2e889e6de36dee6c8becad099272b4"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#afa2e889e6de36dee6c8becad099272b4">TGS.Server.Instance.ProviderInfos</a></div><div class="ttdeci">IList&lt; ChatSetupInfo &gt; ProviderInfos()</div><div class="ttdoc">Returns ChatSetupInfo for all ChatProviders  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00122">Chat.cs:122</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_ab53a558e8ef6a5b06b9260bd0f26f9fc"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#ab53a558e8ef6a5b06b9260bd0f26f9fc">TGS.Server.Instance.Connected</a></div><div class="ttdeci">bool Connected(ChatProvider providerType)</div><div class="ttdoc">Checks connection status  </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00200">Chat.cs:200</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a6791c9be7a1f6784b1b84d3365ba5151"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a6791c9be7a1f6784b1b84d3365ba5151">TGS.Server.Instance.InitChat</a></div><div class="ttdeci">void InitChat()</div><div class="ttdoc">Set up the ChatProviders for the Instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00031">Chat.cs:31</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_chat_setup_info_html"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html">TGS.Interface.ChatSetupInfo</a></div><div class="ttdoc">For setting up authentication no matter the chat provider </div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00014">ChatSetupInfo.cs:14</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider_html_a4f10743426559ccd8c522d49d10106ce"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html#a4f10743426559ccd8c522d49d10106ce">TGS.Server.ChatProviders.IChatProvider.Connect</a></div><div class="ttdeci">string Connect()</div><div class="ttdoc">Connects the chat provider if it&amp;#39;s enabled </div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_af92fd5a1d84bdc9ca61284557561d5c0"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#af92fd5a1d84bdc9ca61284557561d5c0">TGS.Server.Instance.InitProviderInfos</a></div><div class="ttdeci">IList&lt; ChatSetupInfo &gt; InitProviderInfos()</div><div class="ttdoc">Returns a list of ChatSetupInfos loaded from the config or the defaults if none are set ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00134">Chat.cs:134</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_server_html"><div class="ttname"><a href="namespace_t_g_s_1_1_server.html">TGS.Server</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a6f1914e254474070254a2666226455d1"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a6f1914e254474070254a2666226455d1">TGS.Server.Instance.ChatProvider_OnChatMessage</a></div><div class="ttdeci">void ChatProvider_OnChatMessage(IChatProvider ChatProvider, string speaker, string channel, string message, bool isAdmin, bool isAdminChannel)</div><div class="ttdoc">Implementation of OnChatMessage that recieves messages from all channels of all connected ChatProvide...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00075">Chat.cs:75</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_chat_commands_1_1_root_chat_command_html"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_chat_commands_1_1_root_chat_command.html">TGS.Server.ChatCommands.RootChatCommand</a></div><div class="ttdoc">The main root chat command </div><div class="ttdef"><b>Definition:</b> <a href="_root_chat_command_8cs_source.html#l00009">RootChatCommand.cs:9</a></div></div>
<div class="ttc" id="namespace_t_g_s_html"><div class="ttname"><a href="namespace_t_g_s.html">TGS</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider_html_ab5b830098a3f927def58c2bf1f476bb2"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html#ab5b830098a3f927def58c2bf1f476bb2">TGS.Server.ChatProviders.IChatProvider.OnChatMessage</a></div><div class="ttdeci">OnChatMessage OnChatMessage</div><div class="ttdoc">Called with chat message info </div><div class="ttdef"><b>Definition:</b> <a href="_chat_provider_8cs_source.html#l00038">ChatProvider.cs:38</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_server_1_1_chat_commands_html"><div class="ttname"><a href="namespace_t_g_s_1_1_server_1_1_chat_commands.html">TGS.Server.ChatCommands</a></div><div class="ttdef"><b>Definition:</b> <a href="_byond_command_8cs_source.html#l00004">ByondCommand.cs:4</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_chat_providers_1_1_discord_chat_provider_html"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_chat_providers_1_1_discord_chat_provider.html">TGS.Server.ChatProviders.DiscordChatProvider</a></div><div class="ttdoc">IChatProvider for Discord: https://discordapp.com/ </div><div class="ttdef"><b>Definition:</b> <a href="_discord_chat_provider_8cs_source.html#l00014">DiscordChatProvider.cs:14</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_command_html_a557b33f5c2ba313a55ea4c7709768bb4"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_command.html#a557b33f5c2ba313a55ea4c7709768bb4">TGS.Interface.Command.OutputProcVar</a></div><div class="ttdeci">static ThreadLocal&lt; Action&lt; string &gt; &gt; OutputProcVar</div><div class="ttdoc">Proc that will show a message to the Command invoker. Do not call directly, use OutputProc(string) in...</div><div class="ttdef"><b>Definition:</b> <a href="_command_8cs_source.html#l00037">Command.cs:37</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_chat_providers_1_1_i_r_c_chat_provider_html"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_chat_providers_1_1_i_r_c_chat_provider.html">TGS.Server.ChatProviders.IRCChatProvider</a></div><div class="ttdoc">IChatProvider for internet relay chat </div><div class="ttdef"><b>Definition:</b> <a href="_i_r_c_chat_provider_8cs_source.html#l00012">IRCChatProvider.cs:12</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_chat_setup_info_html_a7773ef4bf249fd77b610af017a8b19ec"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a7773ef4bf249fd77b610af017a8b19ec">TGS.Interface.ChatSetupInfo.AdminChannels</a></div><div class="ttdeci">List&lt; string &gt; AdminChannels</div><div class="ttdoc">The channels from which admin commands/messages can be sent/received </div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00149">ChatSetupInfo.cs:149</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_command_html"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_command.html">TGS.Interface.Command</a></div><div class="ttdoc">Helper for creating a text Command tree </div><div class="ttdef"><b>Definition:</b> <a href="_command_8cs_source.html#l00010">Command.cs:10</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_chat_commands_1_1_chat_command_html"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_chat_commands_1_1_chat_command.html">TGS.Server.ChatCommands.ChatCommand</a></div><div class="ttdoc">A command heard by a ChatProviders.IChatProvider </div><div class="ttdef"><b>Definition:</b> <a href="_chat_command_8cs_source.html#l00010">ChatCommand.cs:10</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a4a6845e432d1c660cd56eb2e26b176b2"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a4a6845e432d1c660cd56eb2e26b176b2">TGS.Server.Instance.SendMessage</a></div><div class="ttdeci">void SendMessage(string msg, MessageType mt)</div><div class="ttdoc">Broadcast a message to appropriate channels based on the message type </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00232">Chat.cs:232</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a92962bd476db8f04fa4a1a765e9f43a1"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a92962bd476db8f04fa4a1a765e9f43a1">TGS.Server.Instance.ChatProviders</a></div><div class="ttdeci">IList&lt; IChatProvider &gt; ChatProviders</div><div class="ttdoc">List of IChatProviders for the Instance </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00022">Chat.cs:22</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a40a41b02fd430dabaea6e6dde3f087c7"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a40a41b02fd430dabaea6e6dde3f087c7">TGS.Server.Instance.ChatConnectivityCheck</a></div><div class="ttdeci">void ChatConnectivityCheck()</div><div class="ttdoc">Reconnect servers that are enabled and disconnected. Checked every time DreamDaemon reboots ...</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00211">Chat.cs:211</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_interface_html_a697d691c1d8794ac9898b4fe67f983c2"><div class="ttname"><a href="namespace_t_g_s_1_1_interface.html#a697d691c1d8794ac9898b4fe67f983c2">TGS.Interface.ChatProvider</a></div><div class="ttdeci">ChatProvider</div><div class="ttdoc">The type of chat provider </div><div class="ttdef"><b>Definition:</b> <a href="_enumerations_8cs_source.html#l00080">Enumerations.cs:80</a></div></div>
<div class="ttc" id="_t_g_s_8_command_line_2_program_8cs_html_a81a223a02c34d82b47199f08308847f2"><div class="ttname"><a href="_t_g_s_8_command_line_2_program_8cs.html#a81a223a02c34d82b47199f08308847f2">System</a></div><div class="ttdeci">﻿using System</div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_command_line_2_program_8cs_source.html#l00001">Program.cs:1</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_chat_setup_info_html_a0a4225cbe012a5fe9be7974925089b49"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a0a4225cbe012a5fe9be7974925089b49">TGS.Interface.ChatSetupInfo.WatchdogChannels</a></div><div class="ttdeci">List&lt; string &gt; WatchdogChannels</div><div class="ttdoc">The channels to which watchdog messages are sent </div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00173">ChatSetupInfo.cs:173</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_chat_setup_info_html_a76983b47e811711a14aa573bbdcce99e"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a76983b47e811711a14aa573bbdcce99e">TGS.Interface.ChatSetupInfo.Provider</a></div><div class="ttdeci">ChatProvider Provider</div><div class="ttdoc">The type of provider </div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00206">ChatSetupInfo.cs:206</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a8b657fb564360ff614d9801b9c77af6a"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a8b657fb564360ff614d9801b9c77af6a">TGS.Server.Instance.SetProviderInfo</a></div><div class="ttdeci">string SetProviderInfo(ChatSetupInfo info)</div><div class="ttdoc">Sets a chat provider info   </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00176">Chat.cs:176</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_server_html_a4682739b9567dc9e4e5c327c253ce311"><div class="ttname"><a href="namespace_t_g_s_1_1_server.html#a4682739b9567dc9e4e5c327c253ce311">TGS.Server.EventID</a></div><div class="ttdeci">EventID</div><div class="ttdoc">Various events and their IDs in no particular order. Found in the Windows event log. These key incremented by 100 and are guaranteed to never be reused in the future. In the windows event viewer, these IDs will be offset by the Instance.LoggingID to distinguish events between instances. Each event ID may be information, a warning, or error and will be documented accordingly. Warnings will occur due to user, data, or network errors. Errors will occur due to filesystem errors or hard faults </div><div class="ttdef"><b>Definition:</b> <a href="_event_i_d_8cs_source.html#l00008">EventID.cs:8</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_chat_setup_info_html_ace510c77103bff0d709cc753e05cb2af"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#ace510c77103bff0d709cc753e05cb2af">TGS.Interface.ChatSetupInfo.AdminList</a></div><div class="ttdeci">List&lt; string &gt; AdminList</div><div class="ttdoc">The list of admin entries </div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00133">ChatSetupInfo.cs:133</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider_html"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html">TGS.Server.ChatProviders.IChatProvider</a></div><div class="ttdoc">Interface for a chat provder service </div><div class="ttdef"><b>Definition:</b> <a href="_chat_provider_8cs_source.html#l00020">ChatProvider.cs:20</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_instance_html_a2862110636bab21070659ae80a9db6cc"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_instance.html#a2862110636bab21070659ae80a9db6cc">TGS.Server.Instance.DisposeChat</a></div><div class="ttdeci">void DisposeChat()</div><div class="ttdoc">Properly shuts down all ChatProviders </div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_server_2_instance_2_chat_8cs_source.html#l00104">Chat.cs:104</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_server_html_ac244e362b52b9feac67ac6c2ca27f522"><div class="ttname"><a href="namespace_t_g_s_1_1_server.html#ac244e362b52b9feac67ac6c2ca27f522">TGS.Server.MessageType</a></div><div class="ttdeci">MessageType</div><div class="ttdoc">Type of chat message, these may be OR&amp;#39;d together </div><div class="ttdef"><b>Definition:</b> <a href="_message_type_8cs_source.html#l00008">MessageType.cs:8</a></div></div>
<div class="ttc" id="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider_html_a65a8ad08f620f56df83c338e6e9862c9"><div class="ttname"><a href="interface_t_g_s_1_1_server_1_1_chat_providers_1_1_i_chat_provider.html#a65a8ad08f620f56df83c338e6e9862c9">TGS.Server.ChatProviders.IChatProvider.SendMessageDirect</a></div><div class="ttdeci">string SendMessageDirect(string message, string channel)</div><div class="ttdoc">Send a message  to a channel  </div></div>
<div class="ttc" id="namespace_t_g_s_1_1_interface_html_a6aba89d82a2fad3044034cdca1060c4fa2ec0d16e4ca169baedb9b2d50ec5c6d7"><div class="ttname"><a href="namespace_t_g_s_1_1_interface.html#a6aba89d82a2fad3044034cdca1060c4fa2ec0d16e4ca169baedb9b2d50ec5c6d7">TGS.Interface.ConnectivityLevel.Connected</a></div><div class="ttdoc">The connection could be made </div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_command_html_ad3b7f770775f3ad709530c32955796e7"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_command.html#ad3b7f770775f3ad709530c32955796e7">TGS.Interface.Command.DoRun</a></div><div class="ttdeci">virtual ExitCode DoRun(IList&lt; string &gt; parameters)</div><div class="ttdoc">Caller of Run(IList&lt;string&gt;), can be used to modify the root behaviour of the Command ...</div><div class="ttdef"><b>Definition:</b> <a href="_command_8cs_source.html#l00059">Command.cs:59</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_server_1_1_chat_providers_html"><div class="ttname"><a href="namespace_t_g_s_1_1_server_1_1_chat_providers.html">TGS.Server.ChatProviders</a></div><div class="ttdef"><b>Definition:</b> <a href="_chat_provider_8cs_source.html#l00004">ChatProvider.cs:4</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_server_1_1_server_html"><div class="ttname"><a href="class_t_g_s_1_1_server_1_1_server.html">TGS.Server.Server</a></div><div class="ttdoc">The windows service the application runs as </div><div class="ttdef"><b>Definition:</b> <a href="_server_8cs_source.html#l00018">Server.cs:18</a></div></div>
<div class="ttc" id="namespace_t_g_s_1_1_interface_1_1_components_html"><div class="ttname"><a href="namespace_t_g_s_1_1_interface_1_1_components.html">TGS.Interface.Components</a></div><div class="ttdef"><b>Definition:</b> <a href="_t_g_s_8_interface_2_components_2_administration_8cs_source.html#l00003">Administration.cs:3</a></div></div>
<div class="ttc" id="class_t_g_s_1_1_interface_1_1_chat_setup_info_html_a900c9816cf16a3fc5d2f50ab7c05ec86"><div class="ttname"><a href="class_t_g_s_1_1_interface_1_1_chat_setup_info.html#a900c9816cf16a3fc5d2f50ab7c05ec86">TGS.Interface.ChatSetupInfo.GameChannels</a></div><div class="ttdeci">List&lt; string &gt; GameChannels</div><div class="ttdoc">The channels to which game messages are sent </div><div class="ttdef"><b>Definition:</b> <a href="_chat_setup_info_8cs_source.html#l00185">ChatSetupInfo.cs:185</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
